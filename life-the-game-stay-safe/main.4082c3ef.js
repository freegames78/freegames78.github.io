parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"HmIA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ASSETSPATH={ENDSCREEN:"./assets/endTexts/",AUDIO:"./assets/audio/",BUTTONS:"./assets/buttons/",FONTS:"./assets/fonts/",PHYSICS:"./assets/physics/",LOAD:"./assets/00load/",MENU:"./assets/0Start/",SWEAT:"./assets/covid/sweat/",WASH:"./assets/covid/wash/",DISTANCING:"./assets/covid/distance/",CREDITS:"./assets/covid/credits/"},exports.CONST={ANALYTICS:{VERSION:"covid1.0.2"},REGISTRY:{ADBLOCKENABLED:"adblockEnabled",SKIPUSED:"skipUsed",WASH_ATTEMPTED:"washAttempted",GAME_FINISHED:"gameFinished"},GAMESTATE:{START:"START",PLAYING:"PLAYING",WIN:"WIN",LOSE:"LOSE",LOADNEXTLEVEL:"LOAD"},SCENES:{LOAD:"LOAD",PROGRESSIVE_LOAD:"PROGRESSIVE_LOAD",SOUNDTRACK:"SOUNDTRACK",MENU:"MENU",CREDITS:"END",SWEAT:"SWEAT",WASH:"WASH",DISTANCING:"DISTANCING"},AUDIO:{SOUNDTRACK:exports.ASSETSPATH.AUDIO+"soundtrack.mp3",SOUNDTRACK_SHORT:exports.ASSETSPATH.AUDIO+"soundtrackShort.mp3",WIN:exports.ASSETSPATH.AUDIO+"covid/win.mp3",LOSE:exports.ASSETSPATH.AUDIO+"covid/lose.mp3",BLING:exports.ASSETSPATH.AUDIO+"covid/bling.mp3",RUB:exports.ASSETSPATH.AUDIO+"covid/rubbing_hands.mp3",WOOSH:exports.ASSETSPATH.AUDIO+"covid/woosh.mp3",GRAB:exports.ASSETSPATH.AUDIO+"paperGrab.mp3",BOUNCE:exports.ASSETSPATH.AUDIO+"bounce.mp3"},BUTTONS:{TRYAGAIN:exports.ASSETSPATH.BUTTONS+"button.png",SKIP:exports.ASSETSPATH.BUTTONS+"ad-button.png",SPINNER:exports.ASSETSPATH.BUTTONS+"spinner.png",PLAYAGAIN:exports.ASSETSPATH.BUTTONS+"play_again.png"},FONT:{ATLAS:exports.ASSETSPATH.FONTS+"blogger.png",XML:exports.ASSETSPATH.FONTS+"blogger.xml"},PHYSICS:{DISTANCE:exports.ASSETSPATH.PHYSICS+"distance.json"},MENU:{BACKGROUND:exports.ASSETSPATH.MENU+"Background.png",CLOUDS:exports.ASSETSPATH.MENU+"Clouds.png",OVERLAY:exports.ASSETSPATH.MENU+"overlay.png",VIRUSES:exports.ASSETSPATH.MENU+"viruses.png",ULTRA_WIN:exports.ASSETSPATH.MENU+"ultra_win.png",ULTRA_WIN_BUTTON:exports.ASSETSPATH.MENU+"ultra_win_button.png",BLACK:exports.ASSETSPATH.MENU+"black.png",DIST_WIN:exports.ASSETSPATH.DISTANCING+"distance_win.png",SWEAT_WIN:exports.ASSETSPATH.SWEAT+"sweat_win.png",WASH_WIN:exports.ASSETSPATH.WASH+"wash_win.png"},SWEAT:{BACKGROUND:exports.ASSETSPATH.SWEAT+"background.png",BRACES:exports.ASSETSPATH.SWEAT+"braces.png",DROP:exports.ASSETSPATH.SWEAT+"drop.png",FEVER:exports.ASSETSPATH.SWEAT+"fever.png",PARTICLE:exports.ASSETSPATH.SWEAT+"particle.png",LOSE:exports.ASSETSPATH.SWEAT+"sweat_lose.png"},WASH:{BACKGROUND:exports.ASSETSPATH.WASH+"background.png",FAUCET:exports.ASSETSPATH.WASH+"pipa.png",WATER:exports.ASSETSPATH.WASH+"water.png",SOAP:exports.ASSETSPATH.WASH+"soap.png",SOAP_SHADOW:exports.ASSETSPATH.WASH+"soap_shadow.png",HAND_LEFT:exports.ASSETSPATH.WASH+"hand_left.png",HAND_RIGHT:exports.ASSETSPATH.WASH+"hand_right.png",MASK:exports.ASSETSPATH.WASH+"mask.png",BUBBLE0:exports.ASSETSPATH.WASH+"bubbles/0.png",BUBBLE1:exports.ASSETSPATH.WASH+"bubbles/1.png",BUBBLE2:exports.ASSETSPATH.WASH+"bubbles/2.png",BUBBLE3:exports.ASSETSPATH.WASH+"bubbles/3.png",BUBBLE4:exports.ASSETSPATH.WASH+"bubbles/4.png",BUBBLE5:exports.ASSETSPATH.WASH+"bubbles/5.png",BUBBLE6:exports.ASSETSPATH.WASH+"bubbles/6.png",BUBBLE7:exports.ASSETSPATH.WASH+"bubbles/7.png",BUBBLE8:exports.ASSETSPATH.WASH+"bubbles/8.png",BUBBLE9:exports.ASSETSPATH.WASH+"bubbles/9.png",LOSE:exports.ASSETSPATH.WASH+"wash_lose.png"},DISTANCING:{BOX:exports.ASSETSPATH.DISTANCING+"box.png",BUSH_LEFT:exports.ASSETSPATH.DISTANCING+"bush_left.png",BUSH_RIGHT:exports.ASSETSPATH.DISTANCING+"bush_right.png",BUSH_SMALL:exports.ASSETSPATH.DISTANCING+"bush_small.png",HOUSE:exports.ASSETSPATH.DISTANCING+"house.png",SLIDE:exports.ASSETSPATH.DISTANCING+"slide.png",SWING:exports.ASSETSPATH.DISTANCING+"swing.png",TREE:exports.ASSETSPATH.DISTANCING+"tree.png",BOX_SHADOW:exports.ASSETSPATH.DISTANCING+"box_shadow.png",BUSH_LEFT_SHADOW:exports.ASSETSPATH.DISTANCING+"bush_left_shadow.png",BUSH_RIGHT_SHADOW:exports.ASSETSPATH.DISTANCING+"bush_right_shadow.png",BUSH_SMALL_SHADOW:exports.ASSETSPATH.DISTANCING+"bush_small_shadow.png",HOUSE_SHADOW:exports.ASSETSPATH.DISTANCING+"house_shadow.png",SLIDE_SHADOW:exports.ASSETSPATH.DISTANCING+"slide_shadow.png",SWING_SHADOW:exports.ASSETSPATH.DISTANCING+"swing_shadow.png",TREE_SHADOW:exports.ASSETSPATH.DISTANCING+"tree_shadow.png",CHARACTER1:exports.ASSETSPATH.DISTANCING+"baby_alan.png",DOTS:exports.ASSETSPATH.DISTANCING+"dots.png",BODY:exports.ASSETSPATH.DISTANCING+"player_parts/body.png",FACE:exports.ASSETSPATH.DISTANCING+"player_parts/face.png",LEFT_HAND:exports.ASSETSPATH.DISTANCING+"player_parts/left_hand.png",RIGHT_HAND:exports.ASSETSPATH.DISTANCING+"player_parts/right_hand.png",LEFT_LEG:exports.ASSETSPATH.DISTANCING+"player_parts/left_leg.png",RIGHT_LEG:exports.ASSETSPATH.DISTANCING+"player_parts/right_leg.png",ALAN_BODY:exports.ASSETSPATH.DISTANCING+"player_parts/alan/body.png",ALAN_FACE:exports.ASSETSPATH.DISTANCING+"player_parts/alan/face.png",ALAN_LEFT_HAND:exports.ASSETSPATH.DISTANCING+"player_parts/alan/left_hand.png",ALAN_RIGHT_HAND:exports.ASSETSPATH.DISTANCING+"player_parts/alan/right_hand.png",ALAN_LEFT_LEG:exports.ASSETSPATH.DISTANCING+"player_parts/alan/left_leg.png",ALAN_RIGHT_LEG:exports.ASSETSPATH.DISTANCING+"player_parts/alan/right_leg.png",KID1_BODY:exports.ASSETSPATH.DISTANCING+"player_parts/kid1_body.png",KID1_FACE:exports.ASSETSPATH.DISTANCING+"player_parts/kid1_face.png",KID2_BODY:exports.ASSETSPATH.DISTANCING+"player_parts/kid2_body.png",KID2_FACE:exports.ASSETSPATH.DISTANCING+"player_parts/kid2_face.png",KID3_BODY:exports.ASSETSPATH.DISTANCING+"player_parts/kid3_body.png",KID3_FACE:exports.ASSETSPATH.DISTANCING+"player_parts/kid3_face.png",KID4_BODY:exports.ASSETSPATH.DISTANCING+"player_parts/kid4_body.png",KID4_FACE:exports.ASSETSPATH.DISTANCING+"player_parts/kid4_face.png",BACKGROUND:exports.ASSETSPATH.DISTANCING+"bg.png",LOSE:exports.ASSETSPATH.DISTANCING+"distance_lose.png"},CREDITS:{END:exports.ASSETSPATH.CREDITS+"after_game.png"}};
},{}],"ublV":[function(require,module,exports) {
"use strict";var e=e||function(e,n){var t={},i=t.lib={},s=function(){},r=i.Base={extend:function(e){s.prototype=this;var n=new s;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=r.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=null!=n?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var n=this.words,t=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var s=0;s<e;s++)n[i+s>>>2]|=(t[s>>>2]>>>24-s%4*8&255)<<24-(i+s)%4*8;else if(65535<t.length)for(s=0;s<e;s+=4)n[i+s>>>2]=t[s>>>2];else n.push.apply(n,t);return this.sigBytes+=e,this},clamp:function(){var n=this.words,t=this.sigBytes;n[t>>>2]&=4294967295<<32-t%4*8,n.length=e.ceil(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(n){for(var t=[],i=0;i<n;i+=4)t.push(4294967296*e.random()|0);return new o.init(t,n)}}),a=t.enc={},u=a.Hex={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],i=0;i<e;i++){var s=n[i>>>2]>>>24-i%4*8&255;t.push((s>>>4).toString(16)),t.push((15&s).toString(16))}return t.join("")},parse:function(e){for(var n=e.length,t=[],i=0;i<n;i+=2)t[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new o.init(t,n/2)}},d=a.Latin1={stringify:function(e){var n=e.words;e=e.sigBytes;for(var t=[],i=0;i<e;i++)t.push(String.fromCharCode(n[i>>>2]>>>24-i%4*8&255));return t.join("")},parse:function(e){for(var n=e.length,t=[],i=0;i<n;i++)t[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new o.init(t,n)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(d.stringify(e)))}catch(n){throw Error("Malformed UTF-8 data")}},parse:function(e){return d.parse(unescape(encodeURIComponent(e)))}},l=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(n){var t=this._data,i=t.words,s=t.sigBytes,r=this.blockSize,a=s/(4*r);if(n=(a=n?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*r,s=e.min(4*n,s),n){for(var u=0;u<n;u+=r)this._doProcessBlock(i,u);u=i.splice(0,n),t.sigBytes-=s}return new o.init(u,s)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=l.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(n,t){return new e.init(t).finalize(n)}},_createHmacHelper:function(e){return function(n,t){return new f.HMAC.init(e,t).finalize(n)}}});var f=t.algo={};return t}(Math);!function(n){for(var t=e,i=(r=t.lib).WordArray,s=r.Hasher,r=t.algo,o=[],a=[],u=function(e){return 4294967296*(e-(0|e))|0},d=2,c=0;64>c;){var l;e:{l=d;for(var f=n.sqrt(l),v=2;v<=f;v++)if(!(l%v)){l=!1;break e}l=!0}l&&(8>c&&(o[c]=u(n.pow(d,.5))),a[c]=u(n.pow(d,1/3)),c++),d++}var g=[];r=r.SHA256=s.extend({_doReset:function(){this._hash=new i.init(o.slice(0))},_doProcessBlock:function(e,n){for(var t=this._hash.words,i=t[0],s=t[1],r=t[2],o=t[3],u=t[4],d=t[5],c=t[6],l=t[7],f=0;64>f;f++){if(16>f)g[f]=0|e[n+f];else{var v=g[f-15],m=g[f-2];g[f]=((v<<25|v>>>7)^(v<<14|v>>>18)^v>>>3)+g[f-7]+((m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10)+g[f-16]}v=l+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&d^~u&c)+a[f]+g[f],m=((i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22))+(i&s^i&r^s&r),l=c,c=d,d=u,u=o+v|0,o=r,r=s,s=i,i=v+m|0}t[0]=t[0]+i|0,t[1]=t[1]+s|0,t[2]=t[2]+r|0,t[3]=t[3]+o|0,t[4]=t[4]+u|0,t[5]=t[5]+d|0,t[6]=t[6]+c|0,t[7]=t[7]+l|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,s=8*e.sigBytes;return t[s>>>5]|=128<<24-s%32,t[14+(s+64>>>9<<4)]=n.floor(i/4294967296),t[15+(s+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=s._createHelper(r),t.HmacSHA256=s._createHmacHelper(r)}(Math),function(){var n=e,t=n.enc.Utf8;n.algo.HMAC=n.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init,"string"==typeof n&&(n=t.parse(n));var i=e.blockSize,s=4*i;n.sigBytes>s&&(n=e.finalize(n)),n.clamp();for(var r=this._oKey=n.clone(),o=this._iKey=n.clone(),a=r.words,u=o.words,d=0;d<i;d++)a[d]^=1549556828,u[d]^=909522486;r.sigBytes=o.sigBytes=s,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var n=this._hasher;return e=n.finalize(e),n.reset(),n.finalize(this._oKey.clone().concat(e))}})}(),function(){var n=e,t=n.lib.WordArray;n.enc.Base64={stringify:function(e){var n=e.words,t=e.sigBytes,i=this._map;e.clamp(),e=[];for(var s=0;s<t;s+=3)for(var r=(n[s>>>2]>>>24-s%4*8&255)<<16|(n[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|n[s+2>>>2]>>>24-(s+2)%4*8&255,o=0;4>o&&s+.75*o<t;o++)e.push(i.charAt(r>>>6*(3-o)&63));if(n=i.charAt(64))for(;e.length%4;)e.push(n);return e.join("")},parse:function(e){var n=e.length,i=this._map;(s=i.charAt(64))&&(-1!=(s=e.indexOf(s))&&(n=s));for(var s=[],r=0,o=0;o<n;o++)if(o%4){var a=i.indexOf(e.charAt(o-1))<<o%4*2,u=i.indexOf(e.charAt(o))>>>6-o%4*2;s[r>>>2]|=(a|u)<<24-r%4*8,r++}return t.create(s,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.Debug=1]="Debug",e[e.Info=2]="Info",e[e.Warning=3]="Warning",e[e.Error=4]="Error",e[e.Critical=5]="Critical"}(e.EGAErrorSeverity||(e.EGAErrorSeverity={})),function(e){e[e.Undefined=0]="Undefined",e[e.Male=1]="Male",e[e.Female=2]="Female"}(e.EGAGender||(e.EGAGender={})),function(e){e[e.Undefined=0]="Undefined",e[e.Start=1]="Start",e[e.Complete=2]="Complete",e[e.Fail=3]="Fail"}(e.EGAProgressionStatus||(e.EGAProgressionStatus={})),function(e){e[e.Undefined=0]="Undefined",e[e.Source=1]="Source",e[e.Sink=2]="Sink"}(e.EGAResourceFlowType||(e.EGAResourceFlowType={})),function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.Rejected=1]="Rejected"}(e.EGASdkErrorType||(e.EGASdkErrorType={})),function(e){e[e.NoResponse=0]="NoResponse",e[e.BadResponse=1]="BadResponse",e[e.RequestTimeout=2]="RequestTimeout",e[e.JsonEncodeFailed=3]="JsonEncodeFailed",e[e.JsonDecodeFailed=4]="JsonDecodeFailed",e[e.InternalServerError=5]="InternalServerError",e[e.BadRequest=6]="BadRequest",e[e.Unauthorized=7]="Unauthorized",e[e.UnknownResponseCode=8]="UnknownResponseCode",e[e.Ok=9]="Ok"}(e.EGAHTTPApiResponse||(e.EGAHTTPApiResponse={}))}(e.http||(e.http={}))}(n||(n={}));var n,t=n.EGAErrorSeverity,i=n.EGAGender,s=n.EGAProgressionStatus,r=n.EGAResourceFlowType;!function(e){!function(e){var n;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Debug=3]="Debug"}(n||(n={}));var t=function(){function e(){e.debugEnabled=!1}return e.setInfoLog=function(n){e.instance.infoLogEnabled=n},e.setVerboseLog=function(n){e.instance.infoLogVerboseEnabled=n},e.i=function(t){if(e.instance.infoLogEnabled){var i="Info/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Info)}},e.w=function(t){var i="Warning/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Warning)},e.e=function(t){var i="Error/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Error)},e.ii=function(t){if(e.instance.infoLogVerboseEnabled){var i="Verbose/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Info)}},e.d=function(t){if(e.debugEnabled){var i="Debug/"+e.Tag+": "+t;e.instance.sendNotificationMessage(i,n.Debug)}},e.prototype.sendNotificationMessage=function(e,t){switch(t){case n.Error:console.error(e);break;case n.Warning:console.warn(e);break;case n.Debug:"function"==typeof console.debug?console.debug(e):console.log(e);break;case n.Info:console.log(e)}},e.instance=new e,e.Tag="GameAnalytics",e}();e.GALogger=t}(e.logging||(e.logging={}))}(n||(n={})),function(n){!function(t){var i=n.logging.GALogger,s=function(){function n(){}return n.getHmac=function(n,t){var i=e.HmacSHA256(t,n);return e.enc.Base64.stringify(i)},n.stringMatch=function(e,n){return!(!e||!n)&&n.test(e)},n.joinStringArray=function(e,n){for(var t="",i=0,s=e.length;i<s;i++)i>0&&(t+=n),t+=e[i];return t},n.stringArrayContainsString=function(e,n){if(0===e.length)return!1;for(var t in e)if(e[t]===n)return!0;return!1},n.encode64=function(e){e=encodeURI(e);var t,i,s,r,o,a="",u=0,d=0,c=0;do{s=(t=e.charCodeAt(c++))>>2,r=(3&t)<<4|(i=e.charCodeAt(c++))>>4,o=(15&i)<<2|(u=e.charCodeAt(c++))>>6,d=63&u,isNaN(i)?o=d=64:isNaN(u)&&(d=64),a=a+n.keyStr.charAt(s)+n.keyStr.charAt(r)+n.keyStr.charAt(o)+n.keyStr.charAt(d),t=i=u=0,s=r=o=d=0}while(c<e.length);return a},n.decode64=function(e){var t,s,r,o,a="",u=0,d=0,c=0;/[^A-Za-z0-9\+\/\=]/g.exec(e)&&i.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=n.keyStr.indexOf(e.charAt(c++))<<2|(r=n.keyStr.indexOf(e.charAt(c++)))>>4,s=(15&r)<<4|(o=n.keyStr.indexOf(e.charAt(c++)))>>2,u=(3&o)<<6|(d=n.keyStr.indexOf(e.charAt(c++))),a+=String.fromCharCode(t),64!=o&&(a+=String.fromCharCode(s)),64!=d&&(a+=String.fromCharCode(u)),t=s=u=0,r=o=d=0}while(c<e.length);return decodeURI(a)},n.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},n.createGuid=function(){return(n.s4()+n.s4()+"-"+n.s4()+"-4"+n.s4().substr(0,3)+"-"+n.s4()+"-"+n.s4()+n.s4()+n.s4()).toLowerCase()},n.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},n.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n}();t.GAUtilities=s}(n.utilities||(n.utilities={}))}(n||(n={})),function(e){!function(n){var t=e.logging.GALogger,i=e.http.EGASdkErrorType,s=e.utilities.GAUtilities,r=function(){function n(){}return n.validateBusinessEvent=function(e,i,s,r,o){return n.validateCurrency(e)?i<0?(t.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+i),!1):n.validateShortString(s,!0)?n.validateEventPartLength(r,!1)?n.validateEventPartCharacters(r)?n.validateEventPartLength(o,!1)?!!n.validateEventPartCharacters(o)||(t.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+o),!1):(t.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+o),!1):(t.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+r),!1):(t.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+r),!1):(t.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+s),!1):(t.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),!1)},n.validateResourceEvent=function(i,r,o,a,u,d,c){return i==e.EGAResourceFlowType.Undefined?(t.w("Validation fail - resource event - flowType: Invalid flow type."),!1):r?s.stringArrayContainsString(d,r)?o>0?a?n.validateEventPartLength(a,!1)?n.validateEventPartCharacters(a)?s.stringArrayContainsString(c,a)?n.validateEventPartLength(u,!1)?!!n.validateEventPartCharacters(u)||(t.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+u),!1):(t.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+u),!1):(t.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+a),!1):(t.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+a),!1):(t.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+a),!1):(t.w("Validation fail - resource event - itemType: Cannot be (null)"),!1):(t.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+o),!1):(t.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+r),!1):(t.w("Validation fail - resource event - currency: Cannot be (null)"),!1)},n.validateProgressionEvent=function(i,s,r,o){if(i==e.EGAProgressionStatus.Undefined)return t.w("Validation fail - progression event: Invalid progression status."),!1;if(o&&!r&&s)return t.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),!1;if(r&&!s)return t.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),!1;if(!s)return t.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),!1;if(!n.validateEventPartLength(s,!1))return t.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+s),!1;if(!n.validateEventPartCharacters(s))return t.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+s),!1;if(r){if(!n.validateEventPartLength(r,!0))return t.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+r),!1;if(!n.validateEventPartCharacters(r))return t.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+r),!1}if(o){if(!n.validateEventPartLength(o,!0))return t.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+o),!1;if(!n.validateEventPartCharacters(o))return t.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+o),!1}return!0},n.validateDesignEvent=function(e,i){return n.validateEventIdLength(e)?!!n.validateEventIdCharacters(e)||(t.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),!1):(t.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 32 characters or less. String: "+e),!1)},n.validateErrorEvent=function(i,s){return i==e.EGAErrorSeverity.Undefined?(t.w("Validation fail - error event - severity: Severity was unsupported value."),!1):!!n.validateLongString(s,!0)||(t.w("Validation fail - error event - message: Message cannot be above 8192 characters."),!1)},n.validateSdkErrorEvent=function(e,s,r){return!!n.validateKeys(e,s)&&(r!==i.Undefined||(t.w("Validation fail - sdk error event - type: Type was unsupported value."),!1))},n.validateKeys=function(e,n){return!(!s.stringMatch(e,/^[A-z0-9]{32}$/)||!s.stringMatch(n,/^[A-z0-9]{40}$/))},n.validateCurrency=function(e){return!!e&&!!s.stringMatch(e,/^[A-Z]{3}$/)},n.validateEventPartLength=function(e,n){return!(!n||e)||!!e&&!(e.length>64)},n.validateEventPartCharacters=function(e){return!!s.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},n.validateEventIdLength=function(e){return!!e&&!!s.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},n.validateEventIdCharacters=function(e){return!!e&&!!s.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},n.validateAndCleanInitRequestResponse=function(e){if(null==e)return t.w("validateInitRequestResponse failed - no response dictionary."),null;var n={};try{n.enabled=e.enabled}catch(r){return t.w("validateInitRequestResponse failed - invalid type in 'enabled' field."),null}try{var i=e.server_ts;if(!(i>0))return t.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;n.server_ts=i}catch(r){return t.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof e.server_ts+", value="+e.server_ts+", "+r),null}try{var s=e.configurations;n.configurations=s}catch(r){return t.w("validateInitRequestResponse failed - invalid type in 'configurations' field. type="+typeof e.configurations+", value="+e.configurations+", "+r),null}return n},n.validateBuild=function(e){return!!n.validateShortString(e,!1)},n.validateSdkWrapperVersion=function(e){return!!s.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},n.validateEngineVersion=function(e){return!(!e||!s.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},n.validateUserId=function(e){return!!n.validateString(e,!1)||(t.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},n.validateShortString=function(e,n){return!(!n||e)||!(!e||e.length>32)},n.validateString=function(e,n){return!(!n||e)||!(!e||e.length>64)},n.validateLongString=function(e,n){return!(!n||e)||!(!e||e.length>8192)},n.validateConnectionType=function(e){return s.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},n.validateCustomDimensions=function(e){return n.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},n.validateResourceCurrencies=function(e){if(!n.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var i=0;i<e.length;++i)if(!s.stringMatch(e[i],/^[A-Za-z]+$/))return t.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[i]),!1;return!0},n.validateResourceItemTypes=function(e){if(!n.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var i=0;i<e.length;++i)if(!n.validateEventPartCharacters(e[i]))return t.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[i]),!1;return!0},n.validateDimension01=function(e,n){return!e||!!s.stringArrayContainsString(n,e)},n.validateDimension02=function(e,n){return!e||!!s.stringArrayContainsString(n,e)},n.validateDimension03=function(e,n){return!e||!!s.stringArrayContainsString(n,e)},n.validateArrayOfStrings=function(e,n,i,s,r){var o=s;if(o||(o="Array"),!r)return t.w(o+" validation failed: array cannot be null. "),!1;if(0==i&&0==r.length)return t.w(o+" validation failed: array cannot be empty. "),!1;if(e>0&&r.length>e)return t.w(o+" validation failed: array cannot exceed "+e+" values. It has "+r.length+" values."),!1;for(var a=0;a<r.length;++a){var u=r[a]?r[a].length:0;if(0===u)return t.w(o+" validation failed: contained an empty string. Array="+JSON.stringify(r)),!1;if(n>0&&u>n)return t.w(o+" validation failed: a string exceeded max allowed length (which is: "+n+"). String was: "+r[a]),!1}return!0},n.validateFacebookId=function(e){return!!n.validateString(e,!1)||(t.w("Validation fail - facebook id: id cannot be (null), empty or above 64 characters."),!1)},n.validateGender=function(n){if(isNaN(Number(e.EGAGender[n]))){if(n==e.EGAGender.Undefined||n!=e.EGAGender.Male&&n!=e.EGAGender.Female)return t.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+n),!1}else if(n==e.EGAGender[e.EGAGender.Undefined]||n!=e.EGAGender[e.EGAGender.Male]&&n!=e.EGAGender[e.EGAGender.Female])return t.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+n),!1;return!0},n.validateBirthyear=function(e){return!(e<0||e>9999)||(t.w("Validation fail - birthYear: Cannot be (null) or invalid range."),!1)},n.validateClientTs=function(e){return!(e<-4294967294||e>4294967294)},n}();n.GAValidator=r}(e.validators||(e.validators={}))}(n||(n={})),function(e){!function(e){var n=function(){return function(e,n,t){this.name=e,this.value=n,this.version=t}}();e.NameValueVersion=n;var t=function(){return function(e,n){this.name=e,this.version=n}}();e.NameVersion=t;var i=function(){function e(){}return e.touch=function(){},e.getRelevantSdkVersion=function(){return e.sdkGameEngineVersion?e.sdkGameEngineVersion:e.sdkWrapperVersion},e.getConnectionType=function(){return e.connectionType},e.updateConnectionType=function(){navigator.onLine?"ios"===e.buildPlatform||"android"===e.buildPlatform?e.connectionType="wwan":e.connectionType="lan":e.connectionType="offline"},e.getOSVersionString=function(){return e.buildPlatform+" "+e.osVersionPair.version},e.runtimePlatformToString=function(){return e.osVersionPair.name},e.getBrowserVersionString=function(){var n,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==i.length&&"ios"===e.buildPlatform)return"webkit_"+e.osVersion;if(/trident/i.test(i[1]))return"IE "+((n=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||"");if("Chrome"===i[1]&&null!=(n=t.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return n.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(i[1]&&"fbav"===i[1].toLowerCase()&&(i[1]="facebook",i[2]))return"facebook "+i[2];var s=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(n=t.match(/version\/(\d+)/i))&&s.splice(1,1,n[1]),s.join(" ").toLowerCase()},e.getDeviceModel=function(){return"unknown"},e.getDeviceManufacturer=function(){return"unknown"},e.matchItem=function(e,n){var i,s,r,o,a=new t("unknown","0.0.0"),u=0,d=0;for(u=0;u<n.length;u+=1)if(new RegExp(n[u].value,"i").test(e)){if(i=new RegExp(n[u].version+"[- /:;]([\\d._]+)","i"),o="",(s=e.match(i))&&s[1]&&(r=s[1]),r){var c=r.split(/[._]+/);for(d=0;d<Math.min(c.length,3);d+=1)o+=c[d]+(d<Math.min(c.length,3)-1?".":"")}else o="0.0.0";return a.name=n[u].name,a.version=o,a}return a},e.sdkWrapperVersion="javascript 3.1.2",e.osVersionPair=e.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new n("windows_phone","Windows Phone","OS"),new n("windows","Win","NT"),new n("ios","iPhone","OS"),new n("ios","iPad","OS"),new n("ios","iPod","OS"),new n("android","Android","Android"),new n("blackBerry","BlackBerry","/"),new n("mac_osx","Mac","OS X"),new n("tizen","Tizen","Tizen"),new n("linux","Linux","rv")]),e.buildPlatform=e.runtimePlatformToString(),e.deviceModel=e.getDeviceModel(),e.deviceManufacturer=e.getDeviceManufacturer(),e.osVersion=e.getOSVersionString(),e.browserVersion=e.getBrowserVersionString(),e.maxSafeInteger=Math.pow(2,53)-1,e}();e.GADevice=i}(e.device||(e.device={}))}(n||(n={})),function(e){!function(e){var n=function(){function e(n){this.deadline=n,this.ignore=!1,this.async=!1,this.running=!1,this.id=++e.idCounter}return e.idCounter=0,e}();e.TimedBlock=n}(e.threading||(e.threading={}))}(n||(n={})),function(e){!function(e){var n=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,n){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(n)},e.prototype.addQueueOfPriority=function(e){var n=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,t){return n.comparer.compare(e,t)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return this._sortedKeys.length>0},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],n=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),n},e}();e.PriorityQueue=n}(e.threading||(e.threading={}))}(n||(n={})),function(e){!function(n){var t,i,s=e.logging.GALogger;!function(e){e[e.Equal=0]="Equal",e[e.LessOrEqual=1]="LessOrEqual",e[e.NotEqual=2]="NotEqual"}(t=n.EGAStoreArgsOperator||(n.EGAStoreArgsOperator={})),function(e){e[e.Events=0]="Events",e[e.Sessions=1]="Sessions",e[e.Progression=2]="Progression"}(i=n.EGAStore||(n.EGAStore={}));var r=function(){function e(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{"object"==typeof localStorage?(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),e.storageAvailable=!0):e.storageAvailable=!1}catch(n){}}return e.isStorageAvailable=function(){return e.storageAvailable},e.isStoreTooLargeForEvents=function(){return e.instance.eventsStore.length+e.instance.sessionsStore.length>e.MaxNumberOfEntries},e.select=function(n,i,s,r){void 0===i&&(i=[]),void 0===s&&(s=!1),void 0===r&&(r=0);var o=e.getStore(n);if(!o)return null;for(var a=[],u=0;u<o.length;++u){for(var d=o[u],c=!0,l=0;l<i.length;++l){var f=i[l];if(d[f[0]])switch(f[1]){case t.Equal:c=d[f[0]]==f[2];break;case t.LessOrEqual:c=d[f[0]]<=f[2];break;case t.NotEqual:c=d[f[0]]!=f[2];break;default:c=!1}else c=!1;if(!c)break}c&&a.push(d)}return s&&a.sort(function(e,n){return e.client_ts-n.client_ts}),r>0&&a.length>r&&(a=a.slice(0,r+1)),a},e.update=function(n,i,s){void 0===s&&(s=[]);var r=e.getStore(n);if(!r)return!1;for(var o=0;o<r.length;++o){for(var a=r[o],u=!0,d=0;d<s.length;++d){var c=s[d];if(a[c[0]])switch(c[1]){case t.Equal:u=a[c[0]]==c[2];break;case t.LessOrEqual:u=a[c[0]]<=c[2];break;case t.NotEqual:u=a[c[0]]!=c[2];break;default:u=!1}else u=!1;if(!u)break}if(u)for(d=0;d<i.length;++d){var l=i[d];a[l[0]]=l[1]}}return!0},e.delete=function(n,i){var s=e.getStore(n);if(s)for(var r=0;r<s.length;++r){for(var o=s[r],a=!0,u=0;u<i.length;++u){var d=i[u];if(o[d[0]])switch(d[1]){case t.Equal:a=o[d[0]]==d[2];break;case t.LessOrEqual:a=o[d[0]]<=d[2];break;case t.NotEqual:a=o[d[0]]!=d[2];break;default:a=!1}else a=!1;if(!a)break}a&&(s.splice(r,1),--r)}},e.insert=function(n,t,i,s){void 0===i&&(i=!1),void 0===s&&(s=null);var r=e.getStore(n);if(r)if(i){if(!s)return;for(var o=!1,a=0;a<r.length;++a){var u=r[a];if(u[s]==t[s]){for(var d in t)u[d]=t[d];o=!0;break}}o||r.push(t)}else r.push(t)},e.save=function(){e.isStorageAvailable()?(localStorage.setItem(e.KeyPrefix+e.EventsStoreKey,JSON.stringify(e.instance.eventsStore)),localStorage.setItem(e.KeyPrefix+e.SessionsStoreKey,JSON.stringify(e.instance.sessionsStore)),localStorage.setItem(e.KeyPrefix+e.ProgressionStoreKey,JSON.stringify(e.instance.progressionStore)),localStorage.setItem(e.KeyPrefix+e.ItemsStoreKey,JSON.stringify(e.instance.storeItems))):s.w("Storage is not available, cannot save.")},e.load=function(){if(e.isStorageAvailable()){try{e.instance.eventsStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.EventsStoreKey)),e.instance.eventsStore||(e.instance.eventsStore=[])}catch(n){s.w("Load failed for 'events' store. Using empty store."),e.instance.eventsStore=[]}try{e.instance.sessionsStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.SessionsStoreKey)),e.instance.sessionsStore||(e.instance.sessionsStore=[])}catch(n){s.w("Load failed for 'sessions' store. Using empty store."),e.instance.sessionsStore=[]}try{e.instance.progressionStore=JSON.parse(localStorage.getItem(e.KeyPrefix+e.ProgressionStoreKey)),e.instance.progressionStore||(e.instance.progressionStore=[])}catch(n){s.w("Load failed for 'progression' store. Using empty store."),e.instance.progressionStore=[]}try{e.instance.storeItems=JSON.parse(localStorage.getItem(e.KeyPrefix+e.ItemsStoreKey)),e.instance.storeItems||(e.instance.storeItems={})}catch(n){s.w("Load failed for 'items' store. Using empty store."),e.instance.progressionStore=[]}}else s.w("Storage is not available, cannot load.")},e.setItem=function(n,t){var i=e.KeyPrefix+n;t?e.instance.storeItems[i]=t:i in e.instance.storeItems&&delete e.instance.storeItems[i]},e.getItem=function(n){var t=e.KeyPrefix+n;return t in e.instance.storeItems?e.instance.storeItems[t]:null},e.getStore=function(n){switch(n){case i.Events:return e.instance.eventsStore;case i.Sessions:return e.instance.sessionsStore;case i.Progression:return e.instance.progressionStore;default:return s.w("GAStore.getStore(): Cannot find store: "+n),null}},e.instance=new e,e.MaxNumberOfEntries=2e3,e.KeyPrefix="GA::",e.EventsStoreKey="ga_event",e.SessionsStoreKey="ga_session",e.ProgressionStoreKey="ga_progression",e.ItemsStoreKey="ga_items",e}();n.GAStore=r}(e.store||(e.store={}))}(n||(n={})),function(e){!function(n){var t=e.validators.GAValidator,i=e.utilities.GAUtilities,s=e.logging.GALogger,r=e.store.GAStore,o=e.device.GADevice,a=e.store.EGAStore,u=e.store.EGAStoreArgsOperator,d=function(){function n(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.commandCenterListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0}return n.setUserId=function(e){n.instance.userId=e,n.cacheIdentifier()},n.getIdentifier=function(){return n.instance.identifier},n.isInitialized=function(){return n.instance.initialized},n.setInitialized=function(e){n.instance.initialized=e},n.getSessionStart=function(){return n.instance.sessionStart},n.getSessionNum=function(){return n.instance.sessionNum},n.getTransactionNum=function(){return n.instance.transactionNum},n.getSessionId=function(){return n.instance.sessionId},n.getCurrentCustomDimension01=function(){return n.instance.currentCustomDimension01},n.getCurrentCustomDimension02=function(){return n.instance.currentCustomDimension02},n.getCurrentCustomDimension03=function(){return n.instance.currentCustomDimension03},n.getGameKey=function(){return n.instance.gameKey},n.getGameSecret=function(){return n.instance.gameSecret},n.getAvailableCustomDimensions01=function(){return n.instance.availableCustomDimensions01},n.setAvailableCustomDimensions01=function(e){t.validateCustomDimensions(e)&&(n.instance.availableCustomDimensions01=e,n.validateAndFixCurrentDimensions(),s.i("Set available custom01 dimension values: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableCustomDimensions02=function(){return n.instance.availableCustomDimensions02},n.setAvailableCustomDimensions02=function(e){t.validateCustomDimensions(e)&&(n.instance.availableCustomDimensions02=e,n.validateAndFixCurrentDimensions(),s.i("Set available custom02 dimension values: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableCustomDimensions03=function(){return n.instance.availableCustomDimensions03},n.setAvailableCustomDimensions03=function(e){t.validateCustomDimensions(e)&&(n.instance.availableCustomDimensions03=e,n.validateAndFixCurrentDimensions(),s.i("Set available custom03 dimension values: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableResourceCurrencies=function(){return n.instance.availableResourceCurrencies},n.setAvailableResourceCurrencies=function(e){t.validateResourceCurrencies(e)&&(n.instance.availableResourceCurrencies=e,s.i("Set available resource currencies: ("+i.joinStringArray(e,", ")+")"))},n.getAvailableResourceItemTypes=function(){return n.instance.availableResourceItemTypes},n.setAvailableResourceItemTypes=function(e){t.validateResourceItemTypes(e)&&(n.instance.availableResourceItemTypes=e,s.i("Set available resource item types: ("+i.joinStringArray(e,", ")+")"))},n.getBuild=function(){return n.instance.build},n.setBuild=function(e){n.instance.build=e,s.i("Set build version: "+e)},n.getUseManualSessionHandling=function(){return n.instance.useManualSessionHandling},n.isEventSubmissionEnabled=function(){return n.instance._isEventSubmissionEnabled},n.prototype.setDefaultId=function(e){this.defaultUserId=e||"",n.cacheIdentifier()},n.getDefaultId=function(){return n.instance.defaultUserId},n.getSdkConfig=function(){var e=0;for(var t in n.instance.sdkConfig)0===e&&(i=t),++e;if(i&&e>0)return n.instance.sdkConfig;var i;e=0;for(var t in n.instance.sdkConfigCached)0===e&&(i=t),++e;return i&&e>0?n.instance.sdkConfigCached:n.instance.sdkConfigDefault},n.isEnabled=function(){var e=n.getSdkConfig();return(!e.enabled||"false"!=e.enabled)&&!!n.instance.initAuthorized},n.setCustomDimension01=function(e){n.instance.currentCustomDimension01=e,r.setItem(n.Dimension01Key,e),s.i("Set custom01 dimension value: "+e)},n.setCustomDimension02=function(e){n.instance.currentCustomDimension02=e,r.setItem(n.Dimension02Key,e),s.i("Set custom02 dimension value: "+e)},n.setCustomDimension03=function(e){n.instance.currentCustomDimension03=e,r.setItem(n.Dimension03Key,e),s.i("Set custom03 dimension value: "+e)},n.setFacebookId=function(e){n.instance.facebookId=e,r.setItem(n.FacebookIdKey,e),s.i("Set facebook id: "+e)},n.setGender=function(t){n.instance.gender=isNaN(Number(e.EGAGender[t]))?e.EGAGender[t].toString().toLowerCase():e.EGAGender[e.EGAGender[t]].toString().toLowerCase(),r.setItem(n.GenderKey,n.instance.gender),s.i("Set gender: "+n.instance.gender)},n.setBirthYear=function(e){n.instance.birthYear=e,r.setItem(n.BirthYearKey,e.toString()),s.i("Set birth year: "+e)},n.incrementSessionNum=function(){var e=n.getSessionNum()+1;n.instance.sessionNum=e},n.incrementTransactionNum=function(){var e=n.getTransactionNum()+1;n.instance.transactionNum=e},n.incrementProgressionTries=function(e){var t=n.getProgressionTries(e)+1;n.instance.progressionTries[e]=t;var i={};i.progression=e,i.tries=t,r.insert(a.Progression,i,!0,"progression")},n.getProgressionTries=function(e){return e in n.instance.progressionTries?n.instance.progressionTries[e]:0},n.clearProgressionTries=function(e){e in n.instance.progressionTries&&delete n.instance.progressionTries[e];var t=[];t.push(["progression",u.Equal,e]),r.delete(a.Progression,t)},n.setKeys=function(e,t){n.instance.gameKey=e,n.instance.gameSecret=t},n.setManualSessionHandling=function(e){n.instance.useManualSessionHandling=e,s.i("Use manual session handling: "+e)},n.setEnabledEventSubmission=function(e){n.instance._isEventSubmissionEnabled=e},n.getEventAnnotations=function(){var e={v:2};e.user_id=n.instance.identifier,e.client_ts=n.getClientTsAdjusted(),e.sdk_version=o.getRelevantSdkVersion(),e.os_version=o.osVersion,e.manufacturer=o.deviceManufacturer,e.device=o.deviceModel,e.browser_version=o.browserVersion,e.platform=o.buildPlatform,e.session_id=n.instance.sessionId,e[n.SessionNumKey]=n.instance.sessionNum;var i=o.getConnectionType();return t.validateConnectionType(i)&&(e.connection_type=i),o.gameEngineVersion&&(e.engine_version=o.gameEngineVersion),n.instance.build&&(e.build=n.instance.build),n.instance.facebookId&&(e[n.FacebookIdKey]=n.instance.facebookId),n.instance.gender&&(e[n.GenderKey]=n.instance.gender),0!=n.instance.birthYear&&(e[n.BirthYearKey]=n.instance.birthYear),e},n.getSdkErrorEventAnnotations=function(){var e={v:2};e.category=n.CategorySdkError,e.sdk_version=o.getRelevantSdkVersion(),e.os_version=o.osVersion,e.manufacturer=o.deviceManufacturer,e.device=o.deviceModel,e.platform=o.buildPlatform;var i=o.getConnectionType();return t.validateConnectionType(i)&&(e.connection_type=i),o.gameEngineVersion&&(e.engine_version=o.gameEngineVersion),e},n.getInitAnnotations=function(){var e={};return e.user_id=n.getIdentifier(),e.sdk_version=o.getRelevantSdkVersion(),e.os_version=o.osVersion,e.platform=o.buildPlatform,e},n.getClientTsAdjusted=function(){var e=i.timeIntervalSince1970(),s=e+n.instance.clientServerTimeOffset;return t.validateClientTs(s)?s:e},n.sessionIsStarted=function(){return 0!=n.instance.sessionStart},n.cacheIdentifier=function(){n.instance.userId?n.instance.identifier=n.instance.userId:n.instance.defaultUserId&&(n.instance.identifier=n.instance.defaultUserId)},n.ensurePersistedStates=function(){r.isStorageAvailable()&&r.load();var e=n.instance;e.setDefaultId(null!=r.getItem(n.DefaultUserIdKey)?r.getItem(n.DefaultUserIdKey):i.createGuid()),e.sessionNum=null!=r.getItem(n.SessionNumKey)?Number(r.getItem(n.SessionNumKey)):0,e.transactionNum=null!=r.getItem(n.TransactionNumKey)?Number(r.getItem(n.TransactionNumKey)):0,e.facebookId?r.setItem(n.FacebookIdKey,e.facebookId):(e.facebookId=null!=r.getItem(n.FacebookIdKey)?r.getItem(n.FacebookIdKey):"",e.facebookId),e.gender?r.setItem(n.GenderKey,e.gender):(e.gender=null!=r.getItem(n.GenderKey)?r.getItem(n.GenderKey):"",e.gender),e.birthYear&&0!=e.birthYear?r.setItem(n.BirthYearKey,e.birthYear.toString()):(e.birthYear=null!=r.getItem(n.BirthYearKey)?Number(r.getItem(n.BirthYearKey)):0,e.birthYear),e.currentCustomDimension01?r.setItem(n.Dimension01Key,e.currentCustomDimension01):(e.currentCustomDimension01=null!=r.getItem(n.Dimension01Key)?r.getItem(n.Dimension01Key):"",e.currentCustomDimension01),e.currentCustomDimension02?r.setItem(n.Dimension02Key,e.currentCustomDimension02):(e.currentCustomDimension02=null!=r.getItem(n.Dimension02Key)?r.getItem(n.Dimension02Key):"",e.currentCustomDimension02),e.currentCustomDimension03?r.setItem(n.Dimension03Key,e.currentCustomDimension03):(e.currentCustomDimension03=null!=r.getItem(n.Dimension03Key)?r.getItem(n.Dimension03Key):"",e.currentCustomDimension03);var t=null!=r.getItem(n.SdkConfigCachedKey)?r.getItem(n.SdkConfigCachedKey):"";if(t){var s=JSON.parse(i.decode64(t));s&&(e.sdkConfigCached=s)}var o=r.select(a.Progression);if(o)for(var u=0;u<o.length;++u){var d=o[u];d&&(e.progressionTries[d.progression]=d.tries)}},n.calculateServerTimeOffset=function(e){return e-i.timeIntervalSince1970()},n.validateAndCleanCustomFields=function(e){var t={};if(e){var r=0;for(var o in e){var a=e[o];if(o&&a)if(r<n.MAX_CUSTOM_FIELDS_COUNT){var u=new RegExp("^[a-zA-Z0-9_]{1,"+n.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(i.stringMatch(o,u)){var d=typeof a;if("string"===d||a instanceof String){var c=a;c.length<=n.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&c.length>0?(t[o]=c,++r):s.w("validateAndCleanCustomFields: entry with key="+o+", value="+a+" has been omitted because its value is an empty string or exceeds the max number of characters ("+n.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")")}else if("number"===d||a instanceof Number){var l=a;t[o]=l,++r}else s.w("validateAndCleanCustomFields: entry with key="+o+", value="+a+" has been omitted because its value is not a string or number")}else s.w("validateAndCleanCustomFields: entry with key="+o+", value="+a+" has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+n.MAX_CUSTOM_FIELDS_KEY_LENGTH+")")}else s.w("validateAndCleanCustomFields: entry with key="+o+", value="+a+" has been omitted because it exceeds the max number of custom fields ("+n.MAX_CUSTOM_FIELDS_COUNT+")");else s.w("validateAndCleanCustomFields: entry with key="+o+", value="+a+" has been omitted because its key or value is null")}}return t},n.validateAndFixCurrentDimensions=function(){t.validateDimension01(n.getCurrentCustomDimension01(),n.getAvailableCustomDimensions01())||n.setCustomDimension01(""),t.validateDimension02(n.getCurrentCustomDimension02(),n.getAvailableCustomDimensions02())||n.setCustomDimension02(""),t.validateDimension03(n.getCurrentCustomDimension03(),n.getAvailableCustomDimensions03())||n.setCustomDimension03("")},n.getConfigurationStringValue=function(e,t){return n.instance.configurations[e]?n.instance.configurations[e].toString():t},n.isCommandCenterReady=function(){return n.instance.commandCenterIsReady},n.addCommandCenterListener=function(e){n.instance.commandCenterListeners.indexOf(e)<0&&n.instance.commandCenterListeners.push(e)},n.removeCommandCenterListener=function(e){var t=n.instance.commandCenterListeners.indexOf(e);t>-1&&n.instance.commandCenterListeners.splice(t,1)},n.getConfigurationsContentAsString=function(){return JSON.stringify(n.instance.configurations)},n.populateConfigurations=function(e){var t=e.configurations;if(t)for(var i=0;i<t.length;++i){var s=t[i];if(s){var r=s.key,o=s.value,a=s.start?s.start:Number.MIN_VALUE,u=s.end?s.end:Number.MAX_VALUE,d=n.getClientTsAdjusted();r&&o&&d>a&&d<u&&(n.instance.configurations[r]=o)}}n.instance.commandCenterIsReady=!0;var c=n.instance.commandCenterListeners;for(i=0;i<c.length;++i)c[i]&&c[i].onCommandCenterUpdated()},n.CategorySdkError="sdk_error",n.MAX_CUSTOM_FIELDS_COUNT=50,n.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,n.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,n.instance=new n,n.DefaultUserIdKey="default_user_id",n.SessionNumKey="session_num",n.TransactionNumKey="transaction_num",n.FacebookIdKey="facebook_id",n.GenderKey="gender",n.BirthYearKey="birth_year",n.Dimension01Key="dimension01",n.Dimension02Key="dimension02",n.Dimension03Key="dimension03",n.SdkConfigCachedKey="sdk_config_cached",n}();n.GAState=d}(e.state||(e.state={}))}(n||(n={})),function(e){!function(n){var t=e.utilities.GAUtilities,i=e.logging.GALogger,s=function(){function e(){}return e.execute=function(n,s,r,o){if(e.countMap[s]||(e.countMap[s]=0),!(e.countMap[s]>=e.MaxCount)){var a=t.getHmac(o,r),u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState){if(!u.responseText)return;if(200!=u.status)return void i.w("sdk error failed. response code not 200. status code: "+u.status+", description: "+u.statusText+", body: "+u.responseText);e.countMap[s]=e.countMap[s]+1}},u.open("POST",n,!0),u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("Authorization",a);try{u.send(r)}catch(d){console.error(d)}}},e.MaxCount=10,e.countMap={},e}();n.SdkErrorTask=s}(e.tasks||(e.tasks={}))}(n||(n={})),function(e){!function(n){var t=e.state.GAState,i=e.logging.GALogger,s=e.utilities.GAUtilities,r=e.validators.GAValidator,o=e.tasks.SdkErrorTask,a=function(){function e(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return e.prototype.requestInit=function(i){var s=t.getGameKey(),r=(this.baseUrl,this.initializeUrlPath);r="https://rubick.gameanalytics.com/v2/command_center?game_key="+s+"&interval_seconds=1000000";var o=t.getInitAnnotations(),a=JSON.stringify(o);if(a){var u=this.createPayloadData(a,this.useGzip),d=[];d.push(a),e.sendRequest(r,u,d,this.useGzip,e.initRequestCallback,i)}else i(n.EGAHTTPApiResponse.JsonEncodeFailed,null)},e.prototype.sendEventsInArray=function(i,s,r){if(0!=i.length){var o=t.getGameKey(),a=this.baseUrl+"/"+o+"/"+this.eventsUrlPath,u=JSON.stringify(i);if(u){var d=this.createPayloadData(u,this.useGzip),c=[];c.push(u),c.push(s),c.push(i.length.toString()),e.sendRequest(a,d,c,this.useGzip,e.sendEventInArrayRequestCallback,r)}else r(n.EGAHTTPApiResponse.JsonEncodeFailed,null,s,i.length)}},e.prototype.sendSdkErrorEvent=function(n){if(t.isEventSubmissionEnabled()){var s=t.getGameKey(),a=t.getGameSecret();if(r.validateSdkErrorEvent(s,a,n)){var u,d=this.baseUrl+"/"+s+"/"+this.eventsUrlPath,c=t.getSdkErrorEventAnnotations(),l=e.sdkErrorTypeToString(n);c.type=l;var f=[];f.push(c),(u=JSON.stringify(f))?o.execute(d,n,u,a):i.w("sendSdkErrorEvent: JSON encoding failed.")}}},e.sendEventInArrayRequestCallback=function(t,i,s,r){void 0===r&&(r=null);r[0],r[1];var o,a,u=r[2],d=parseInt(r[3]);o=t.responseText,a=t.status;var c=e.instance.processRequestResponse(a,t.statusText,o,"Events");if(c==n.EGAHTTPApiResponse.Ok||c==n.EGAHTTPApiResponse.BadRequest){var l=o?JSON.parse(o):{};null!=l?(n.EGAHTTPApiResponse.BadRequest,s(c,l,u,d)):s(n.EGAHTTPApiResponse.JsonDecodeFailed,null,u,d)}else s(c,null,u,d)},e.sendRequest=function(e,n,i,r,o,a){var u=new XMLHttpRequest,d=t.getGameSecret(),c=s.getHmac(d,n),l=[];for(var f in l.push(c),i)l.push(i[f]);if(u.onreadystatechange=function(){4===u.readyState&&o(u,e,a,l)},u.open("POST",e,!0),u.setRequestHeader("Content-Type","text/plain"),u.setRequestHeader("Authorization",c),r)throw new Error("gzip not supported");try{u.send(n)}catch(v){console.error(v.stack)}},e.initRequestCallback=function(t,i,s,o){void 0===o&&(o=null);var a,u;o[0],o[1];a=t.responseText,u=t.status;var d=a?JSON.parse(a):{},c=e.instance.processRequestResponse(u,t.statusText,a,"Init");if(c==n.EGAHTTPApiResponse.Ok||c==n.EGAHTTPApiResponse.BadRequest)if(null!=d)if(c!==n.EGAHTTPApiResponse.BadRequest){var l=r.validateAndCleanInitRequestResponse(d);l?s(n.EGAHTTPApiResponse.Ok,l,"",0):s(n.EGAHTTPApiResponse.BadResponse,null,"",0)}else s(c,null,"",0);else s(n.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0);else s(c,null,"",0)},e.prototype.createPayloadData=function(e,n){if(n)throw new Error("gzip not supported");return e},e.prototype.processRequestResponse=function(e,t,i,s){return i?200===e?n.EGAHTTPApiResponse.Ok:0===e||401===e?n.EGAHTTPApiResponse.Unauthorized:400===e?n.EGAHTTPApiResponse.BadRequest:500===e?n.EGAHTTPApiResponse.InternalServerError:n.EGAHTTPApiResponse.UnknownResponseCode:n.EGAHTTPApiResponse.NoResponse},e.sdkErrorTypeToString=function(e){switch(e){case n.EGASdkErrorType.Rejected:return"rejected";default:return""}},e.instance=new e,e}();n.GAHTTPApi=a}(e.http||(e.http={}))}(n||(n={})),function(e){var n,t,i,s,r,o,a,u,d,c,l,f;n=e.events||(e.events={}),t=e.store.GAStore,i=e.store.EGAStore,s=e.store.EGAStoreArgsOperator,r=e.state.GAState,o=e.logging.GALogger,a=e.utilities.GAUtilities,u=e.http.EGAHTTPApiResponse,d=e.http.GAHTTPApi,c=e.validators.GAValidator,l=e.http.EGASdkErrorType,f=function(){function n(){}return n.addSessionStartEvent=function(){if(r.isEventSubmissionEnabled()){var e={};e.category=n.CategorySessionStart,r.incrementSessionNum(),t.setItem(r.SessionNumKey,r.getSessionNum().toString()),n.addDimensionsToEvent(e),n.addEventToStore(e),o.i("Add SESSION START event"),n.processEvents(n.CategorySessionStart,!1)}},n.addSessionEndEvent=function(){if(r.isEventSubmissionEnabled()){var e=r.getSessionStart(),t=r.getClientTsAdjusted()-e;t<0&&(o.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),t=0);var i={};i.category=n.CategorySessionEnd,i.length=t,n.addDimensionsToEvent(i),n.addEventToStore(i),o.i("Add SESSION END event."),n.processEvents("",!1)}},n.addBusinessEvent=function(e,i,s,a,u,f){if(void 0===u&&(u=null),r.isEventSubmissionEnabled())if(c.validateBusinessEvent(e,i,u,s,a)){var v={};r.incrementTransactionNum(),t.setItem(r.TransactionNumKey,r.getTransactionNum().toString()),v.event_id=s+":"+a,v.category=n.CategoryBusiness,v.currency=e,v.amount=i,v[r.TransactionNumKey]=r.getTransactionNum(),u&&(v.cart_type=u),n.addDimensionsToEvent(v),n.addFieldsToEvent(v,r.validateAndCleanCustomFields(f)),o.i("Add BUSINESS event: {currency:"+e+", amount:"+i+", itemType:"+s+", itemId:"+a+", cartType:"+u+"}"),n.addEventToStore(v)}else d.instance.sendSdkErrorEvent(l.Rejected)},n.addResourceEvent=function(t,i,s,a,u,f){if(r.isEventSubmissionEnabled())if(c.validateResourceEvent(t,i,s,a,u,r.getAvailableResourceCurrencies(),r.getAvailableResourceItemTypes())){t===e.EGAResourceFlowType.Sink&&(s*=-1);var v={},g=n.resourceFlowTypeToString(t);v.event_id=g+":"+i+":"+a+":"+u,v.category=n.CategoryResource,v.amount=s,n.addDimensionsToEvent(v),n.addFieldsToEvent(v,r.validateAndCleanCustomFields(f)),o.i("Add RESOURCE event: {currency:"+i+", amount:"+s+", itemType:"+a+", itemId:"+u+"}"),n.addEventToStore(v)}else d.instance.sendSdkErrorEvent(l.Rejected)},n.addProgressionEvent=function(t,i,s,a,u,f,v){if(r.isEventSubmissionEnabled()){var g=n.progressionStatusToString(t);if(c.validateProgressionEvent(t,i,s,a)){var m,p={};m=s?a?i+":"+s+":"+a:i+":"+s:i,p.category=n.CategoryProgression,p.event_id=g+":"+m;var h=0;f&&t!=e.EGAProgressionStatus.Start&&(p.score=u),t===e.EGAProgressionStatus.Fail&&r.incrementProgressionTries(m),t===e.EGAProgressionStatus.Complete&&(r.incrementProgressionTries(m),h=r.getProgressionTries(m),p.attempt_num=h,r.clearProgressionTries(m)),n.addDimensionsToEvent(p),n.addFieldsToEvent(p,r.validateAndCleanCustomFields(v)),o.i("Add PROGRESSION event: {status:"+g+", progression01:"+i+", progression02:"+s+", progression03:"+a+", score:"+u+", attempt:"+h+"}"),n.addEventToStore(p)}else d.instance.sendSdkErrorEvent(l.Rejected)}},n.addDesignEvent=function(e,t,i,s){if(r.isEventSubmissionEnabled())if(c.validateDesignEvent(e,t)){var a={};a.category=n.CategoryDesign,a.event_id=e,i&&(a.value=t),n.addDimensionsToEvent(a),n.addFieldsToEvent(a,r.validateAndCleanCustomFields(s)),o.i("Add DESIGN event: {eventId:"+e+", value:"+t+"}"),n.addEventToStore(a)}else d.instance.sendSdkErrorEvent(l.Rejected)},n.addErrorEvent=function(e,t,i){if(r.isEventSubmissionEnabled()){var s=n.errorSeverityToString(e);if(c.validateErrorEvent(e,t)){var a={};a.category=n.CategoryError,a.severity=s,a.message=t,n.addDimensionsToEvent(a),n.addFieldsToEvent(a,r.validateAndCleanCustomFields(i)),o.i("Add ERROR event: {severity:"+s+", message:"+t+"}"),n.addEventToStore(a)}else d.instance.sendSdkErrorEvent(l.Rejected)}},n.processEvents=function(e,u){if(r.isEventSubmissionEnabled())try{var c=a.createGuid();u&&(n.cleanupEvents(),n.fixMissingSessionEndEvents());var l=[];l.push(["status",s.Equal,"new"]);var f=[];f.push(["status",s.Equal,"new"]),e&&(l.push(["category",s.Equal,e]),f.push(["category",s.Equal,e]));var v=[];v.push(["status",c]);var g=t.select(i.Events,l);if(!g||0==g.length)return o.i("Event queue: No events to send"),void n.updateSessionStore();if(g.length>n.MaxEventCount){if(!(g=t.select(i.Events,l,!0,n.MaxEventCount)))return;var m=g[g.length-1].client_ts;if(l.push(["client_ts",s.LessOrEqual,m]),!(g=t.select(i.Events,l)))return;f.push(["client_ts",s.LessOrEqual,m])}if(o.i("Event queue: Sending "+g.length+" events."),!t.update(i.Events,v,f))return;for(var p=[],h=0;h<g.length;++h){var S=g[h],E=JSON.parse(a.decode64(S.event));0!=E.length&&p.push(E)}d.instance.sendEventsInArray(p,c,n.processEventsCallback)}catch(y){o.e("Error during ProcessEvents(): "+y.stack)}},n.processEventsCallback=function(e,n,r,a){var d=[];if(d.push(["status",s.Equal,r]),e===u.Ok)t.delete(i.Events,d),o.i("Event queue: "+a+" events sent.");else if(e===u.NoResponse){var c=[];c.push(["status","new"]),o.w("Event queue: Failed to send events to collector - Retrying next time"),t.update(i.Events,c,d)}else{if(n){var l,f=0;for(var v in n)0==f&&(l=n[v]),++f;e===u.BadRequest&&l.constructor===Array?o.w("Event queue: "+a+" events sent. "+f+" events failed GA server validation."):o.w("Event queue: Failed to send events.")}else o.w("Event queue: Failed to send events.");t.delete(i.Events,d)}},n.cleanupEvents=function(){t.update(i.Events,[["status","new"]])},n.fixMissingSessionEndEvents=function(){if(r.isEventSubmissionEnabled()){var e=[];e.push(["session_id",s.NotEqual,r.getSessionId()]);var u=t.select(i.Sessions,e);if(u&&0!=u.length){o.i(u.length+" session(s) located with missing session_end event.");for(var d=0;d<u.length;++d){var c=JSON.parse(a.decode64(u[d].event)),l=c.client_ts-u[d].timestamp;l=Math.max(0,l),c.category=n.CategorySessionEnd,c.length=l,n.addEventToStore(c)}}}},n.addEventToStore=function(e){if(r.isEventSubmissionEnabled())if(r.isInitialized())try{if(t.isStoreTooLargeForEvents()&&!a.stringMatch(e.category,/^(user|session_end|business)$/))return void o.w("Database too large. Event has been blocked.");var u=r.getEventAnnotations(),d=a.encode64(JSON.stringify(u));for(var c in e)u[c]=e[c];var l=JSON.stringify(u);o.ii("Event added to queue: "+l);var f={status:"new"};f.category=u.category,f.session_id=u.session_id,f.client_ts=u.client_ts,f.event=a.encode64(JSON.stringify(u)),t.insert(i.Events,f),e.category==n.CategorySessionEnd?t.delete(i.Sessions,[["session_id",s.Equal,u.session_id]]):((f={}).session_id=u.session_id,f.timestamp=r.getSessionStart(),f.event=d,t.insert(i.Sessions,f,!0,"session_id")),t.isStorageAvailable()&&t.save()}catch(c){o.e("addEventToStore: error"),o.e(c.stack)}else o.w("Could not add event: SDK is not initialized")},n.updateSessionStore=function(){if(r.sessionIsStarted()){var e={};e.session_id=r.instance.sessionId,e.timestamp=r.getSessionStart(),e.event=a.encode64(JSON.stringify(r.getEventAnnotations())),t.insert(i.Sessions,e,!0,"session_id"),t.isStorageAvailable()&&t.save()}},n.addDimensionsToEvent=function(e){e&&(r.getCurrentCustomDimension01()&&(e.custom_01=r.getCurrentCustomDimension01()),r.getCurrentCustomDimension02()&&(e.custom_02=r.getCurrentCustomDimension02()),r.getCurrentCustomDimension03()&&(e.custom_03=r.getCurrentCustomDimension03()))},n.addFieldsToEvent=function(e,n){e&&n&&Object.keys(n).length>0&&(e.custom_fields=n)},n.resourceFlowTypeToString=function(n){return n==e.EGAResourceFlowType.Source||n==e.EGAResourceFlowType[e.EGAResourceFlowType.Source]?"Source":n==e.EGAResourceFlowType.Sink||n==e.EGAResourceFlowType[e.EGAResourceFlowType.Sink]?"Sink":""},n.progressionStatusToString=function(n){return n==e.EGAProgressionStatus.Start||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Start]?"Start":n==e.EGAProgressionStatus.Complete||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Complete]?"Complete":n==e.EGAProgressionStatus.Fail||n==e.EGAProgressionStatus[e.EGAProgressionStatus.Fail]?"Fail":""},n.errorSeverityToString=function(n){return n==e.EGAErrorSeverity.Debug||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Debug]?"debug":n==e.EGAErrorSeverity.Info||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Info]?"info":n==e.EGAErrorSeverity.Warning||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Warning]?"warning":n==e.EGAErrorSeverity.Error||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Error]?"error":n==e.EGAErrorSeverity.Critical||n==e.EGAErrorSeverity[e.EGAErrorSeverity.Critical]?"critical":""},n.instance=new n,n.CategorySessionStart="user",n.CategorySessionEnd="session_end",n.CategoryDesign="design",n.CategoryBusiness="business",n.CategoryProgression="progression",n.CategoryResource="resource",n.CategoryError="error",n.MaxEventCount=500,n}(),n.GAEvents=f}(n||(n={})),function(e){!function(n){var t=e.logging.GALogger,i=e.state.GAState,s=e.events.GAEvents,r=function(){function e(){this.blocks=new n.PriorityQueue({compare:function(e,n){return e-n}}),this.id2TimedBlockMap={},e.startThread()}return e.createTimedBlock=function(e){void 0===e&&(e=0);var t=new Date;return t.setSeconds(t.getSeconds()+e),new n.TimedBlock(t)},e.performTaskOnGAThread=function(t,i){void 0===i&&(i=0);var s=new Date;s.setSeconds(s.getSeconds()+i);var r=new n.TimedBlock(s);r.block=t,e.instance.id2TimedBlockMap[r.id]=r,e.instance.addTimedBlock(r)},e.performTimedBlockOnGAThread=function(n){e.instance.id2TimedBlockMap[n.id]=n,e.instance.addTimedBlock(n)},e.scheduleTimer=function(t,i){var s=new Date;s.setSeconds(s.getSeconds()+t);var r=new n.TimedBlock(s);return r.block=i,e.instance.id2TimedBlockMap[r.id]=r,e.instance.addTimedBlock(r),r.id},e.getTimedBlockById=function(n){return n in e.instance.id2TimedBlockMap?e.instance.id2TimedBlockMap[n]:null},e.ensureEventQueueIsRunning=function(){e.instance.keepRunning=!0,e.instance.isRunning||(e.instance.isRunning=!0,e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue))},e.endSessionAndStopQueue=function(){i.isInitialized()&&(t.i("Ending session."),e.stopEventQueue(),i.isEnabled()&&i.sessionIsStarted()&&(s.addSessionEndEvent(),i.instance.sessionStart=0))},e.stopEventQueue=function(){e.instance.keepRunning=!1},e.ignoreTimer=function(n){n in e.instance.id2TimedBlockMap&&(e.instance.id2TimedBlockMap[n].ignore=!0)},e.setEventProcessInterval=function(n){n>0&&(e.ProcessEventsIntervalInSeconds=n)},e.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},e.run=function(){clearTimeout(e.runTimeoutId);try{for(var n;n=e.getNextBlock();)if(!n.ignore)if(n.async){if(!n.running){n.running=!0,n.block();break}}else n.block();return void(e.runTimeoutId=setTimeout(e.run,e.ThreadWaitTimeInMs))}catch(i){t.e("Error on GA thread"),t.e(i.stack)}},e.startThread=function(){e.runTimeoutId=setTimeout(e.run,0)},e.getNextBlock=function(){var n=new Date;return e.instance.blocks.hasItems()&&e.instance.blocks.peek().deadline.getTime()<=n.getTime()?e.instance.blocks.peek().async&&e.instance.blocks.peek().running?e.instance.blocks.peek():e.instance.blocks.dequeue():null},e.processEventQueue=function(){s.processEvents("",!0),e.instance.keepRunning?e.scheduleTimer(e.ProcessEventsIntervalInSeconds,e.processEventQueue):e.instance.isRunning=!1},e.instance=new e,e.ThreadWaitTimeInMs=1e3,e.ProcessEventsIntervalInSeconds=8,e}();n.GAThreading=r}(e.threading||(e.threading={}))}(n||(n={})),function(e){var n=e.threading.GAThreading,t=e.logging.GALogger,i=e.store.GAStore,s=e.state.GAState,r=e.http.GAHTTPApi,o=e.device.GADevice,a=e.validators.GAValidator,u=e.http.EGAHTTPApiResponse,d=e.utilities.GAUtilities,c=e.events.GAEvents,l=function(){function l(){}return l.init=function(){if(o.touch(),l.methodMap.configureAvailableCustomDimensions01=l.configureAvailableCustomDimensions01,l.methodMap.configureAvailableCustomDimensions02=l.configureAvailableCustomDimensions02,l.methodMap.configureAvailableCustomDimensions03=l.configureAvailableCustomDimensions03,l.methodMap.configureAvailableResourceCurrencies=l.configureAvailableResourceCurrencies,l.methodMap.configureAvailableResourceItemTypes=l.configureAvailableResourceItemTypes,l.methodMap.configureBuild=l.configureBuild,l.methodMap.configureSdkGameEngineVersion=l.configureSdkGameEngineVersion,l.methodMap.configureGameEngineVersion=l.configureGameEngineVersion,l.methodMap.configureUserId=l.configureUserId,l.methodMap.initialize=l.initialize,l.methodMap.addBusinessEvent=l.addBusinessEvent,l.methodMap.addResourceEvent=l.addResourceEvent,l.methodMap.addProgressionEvent=l.addProgressionEvent,l.methodMap.addDesignEvent=l.addDesignEvent,l.methodMap.addErrorEvent=l.addErrorEvent,l.methodMap.addErrorEvent=l.addErrorEvent,l.methodMap.setEnabledInfoLog=l.setEnabledInfoLog,l.methodMap.setEnabledVerboseLog=l.setEnabledVerboseLog,l.methodMap.setEnabledManualSessionHandling=l.setEnabledManualSessionHandling,l.methodMap.setEnabledEventSubmission=l.setEnabledEventSubmission,l.methodMap.setCustomDimension01=l.setCustomDimension01,l.methodMap.setCustomDimension02=l.setCustomDimension02,l.methodMap.setCustomDimension03=l.setCustomDimension03,l.methodMap.setFacebookId=l.setFacebookId,l.methodMap.setGender=l.setGender,l.methodMap.setBirthYear=l.setBirthYear,l.methodMap.setEventProcessInterval=l.setEventProcessInterval,l.methodMap.startSession=l.startSession,l.methodMap.endSession=l.endSession,l.methodMap.onStop=l.onStop,l.methodMap.onResume=l.onResume,l.methodMap.addCommandCenterListener=l.addCommandCenterListener,l.methodMap.removeCommandCenterListener=l.removeCommandCenterListener,l.methodMap.getCommandCenterValueAsString=l.getCommandCenterValueAsString,l.methodMap.isCommandCenterReady=l.isCommandCenterReady,l.methodMap.getConfigurationsContentAsString=l.getConfigurationsContentAsString,"undefined"!=typeof window&&void 0!==window.GameAnalytics&&void 0!==window.GameAnalytics.q){var e=window.GameAnalytics.q;for(var n in e)l.gaCommand.apply(null,e[n])}},l.gaCommand=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n.length>0&&n[0]in e.GameAnalytics.methodMap&&(n.length>1?e.GameAnalytics.methodMap[n[0]].apply(null,Array.prototype.slice.call(n,1)):e.GameAnalytics.methodMap[n[0]]())},l.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("Available custom dimensions must be set before SDK is initialized"):s.setAvailableCustomDimensions01(e)})},l.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("Available custom dimensions must be set before SDK is initialized"):s.setAvailableCustomDimensions02(e)})},l.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("Available custom dimensions must be set before SDK is initialized"):s.setAvailableCustomDimensions03(e)})},l.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("Available resource currencies must be set before SDK is initialized"):s.setAvailableResourceCurrencies(e)})},l.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("Available resource item types must be set before SDK is initialized"):s.setAvailableResourceItemTypes(e)})},l.configureBuild=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("Build version must be set before SDK is initialized."):a.validateBuild(e)?s.setBuild(e):t.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},l.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)||(a.validateSdkWrapperVersion(e)?o.sdkGameEngineVersion=e:t.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e))})},l.configureGameEngineVersion=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)||(a.validateEngineVersion(e)?o.gameEngineVersion=e:t.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e))})},l.configureUserId=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!1)?t.w("A custom user id must be set before SDK is initialized."):a.validateUserId(e)?s.setUserId(e):t.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},l.initialize=function(e,i){void 0===e&&(e=""),void 0===i&&(i=""),o.updateConnectionType();var r=n.createTimedBlock();r.async=!0,l.initTimedBlockId=r.id,r.block=function(){l.isSdkReady(!0,!1)?t.w("SDK already initialized. Can only be called once."):a.validateKeys(e,i)?(s.setKeys(e,i),l.internalInitialize()):t.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+i)},n.performTimedBlockOnGAThread(r)},l.addBusinessEvent=function(e,t,i,s,r){void 0===e&&(e=""),void 0===t&&(t=0),void 0===i&&(i=""),void 0===s&&(s=""),void 0===r&&(r=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add business event")&&c.addBusinessEvent(e,t,i,s,r,{})})},l.addResourceEvent=function(t,i,s,r,a){void 0===t&&(t=e.EGAResourceFlowType.Undefined),void 0===i&&(i=""),void 0===s&&(s=0),void 0===r&&(r=""),void 0===a&&(a=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add resource event")&&c.addResourceEvent(t,i,s,r,a,{})})},l.addProgressionEvent=function(t,i,s,r,a){void 0===t&&(t=e.EGAProgressionStatus.Undefined),void 0===i&&(i=""),void 0===s&&(s=""),void 0===r&&(r=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!0,"Could not add progression event")){var e="number"==typeof a;c.addProgressionEvent(t,i,s,r,e?a:0,e,{})}})},l.addDesignEvent=function(e,t){o.updateConnectionType(),n.performTaskOnGAThread(function(){if(l.isSdkReady(!0,!0,"Could not add design event")){var n="number"==typeof t;c.addDesignEvent(e,n?t:0,n,{})}})},l.addErrorEvent=function(t,i){void 0===t&&(t=e.EGAErrorSeverity.Undefined),void 0===i&&(i=""),o.updateConnectionType(),n.performTaskOnGAThread(function(){l.isSdkReady(!0,!0,"Could not add error event")&&c.addErrorEvent(t,i,{})})},l.setEnabledInfoLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(t.setInfoLog(e),t.i("Info logging enabled")):(t.i("Info logging disabled"),t.setInfoLog(e))})},l.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(t.setVerboseLog(e),t.i("Verbose logging enabled")):(t.i("Verbose logging disabled"),t.setVerboseLog(e))})},l.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){s.setManualSessionHandling(e)})},l.setEnabledEventSubmission=function(e){void 0===e&&(e=!1),n.performTaskOnGAThread(function(){e?(s.setEnabledEventSubmission(e),t.i("Event submission enabled")):(t.i("Event submission disabled"),s.setEnabledEventSubmission(e))})},l.setCustomDimension01=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){a.validateDimension01(e,s.getAvailableCustomDimensions01())?s.setCustomDimension01(e):t.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values")})},l.setCustomDimension02=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){a.validateDimension02(e,s.getAvailableCustomDimensions02())?s.setCustomDimension02(e):t.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values")})},l.setCustomDimension03=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){a.validateDimension03(e,s.getAvailableCustomDimensions03())?s.setCustomDimension03(e):t.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values")})},l.setFacebookId=function(e){void 0===e&&(e=""),n.performTaskOnGAThread(function(){a.validateFacebookId(e)&&s.setFacebookId(e)})},l.setGender=function(t){void 0===t&&(t=e.EGAGender.Undefined),n.performTaskOnGAThread(function(){a.validateGender(t)&&s.setGender(t)})},l.setBirthYear=function(e){void 0===e&&(e=0),n.performTaskOnGAThread(function(){a.validateBirthyear(e)&&s.setBirthYear(e)})},l.setEventProcessInterval=function(e){n.performTaskOnGAThread(function(){n.setEventProcessInterval(e)})},l.startSession=function(){if(s.isInitialized()){var e=n.createTimedBlock();e.async=!0,l.initTimedBlockId=e.id,e.block=function(){s.isEnabled()&&s.sessionIsStarted()&&n.endSessionAndStopQueue(),l.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)}},l.endSession=function(){l.onStop()},l.onStop=function(){n.performTaskOnGAThread(function(){try{n.endSessionAndStopQueue()}catch(e){}})},l.onResume=function(){var e=n.createTimedBlock();e.async=!0,l.initTimedBlockId=e.id,e.block=function(){l.resumeSessionAndStartQueue()},n.performTimedBlockOnGAThread(e)},l.getCommandCenterValueAsString=function(e,n){return void 0===n&&(n=null),s.getConfigurationStringValue(e,n)},l.isCommandCenterReady=function(){return s.isCommandCenterReady()},l.addCommandCenterListener=function(e){s.addCommandCenterListener(e)},l.removeCommandCenterListener=function(e){s.removeCommandCenterListener(e)},l.getConfigurationsContentAsString=function(){return s.getConfigurationsContentAsString()},l.internalInitialize=function(){s.ensurePersistedStates(),i.setItem(s.DefaultUserIdKey,s.getDefaultId()),s.setInitialized(!0),l.newSession(),s.isEnabled()&&n.ensureEventQueueIsRunning()},l.newSession=function(){t.i("Starting a new session."),s.validateAndFixCurrentDimensions(),r.instance.requestInit(l.startNewSessionCallback)},l.startNewSessionCallback=function(e,r){if(e===u.Ok&&r){var o=0;if(r.server_ts){var a=r.server_ts;o=s.calculateServerTimeOffset(a)}r.time_offset=o,i.setItem(s.SdkConfigCachedKey,d.encode64(JSON.stringify(r))),s.instance.sdkConfigCached=r,s.instance.sdkConfig=r,s.instance.initAuthorized=!0}else e==u.Unauthorized?(t.w("Initialize SDK failed - Unauthorized"),s.instance.initAuthorized=!1):(e===u.NoResponse||e===u.RequestTimeout?t.i("Init call (session start) failed - no response. Could be offline or timeout."):e===u.BadResponse||e===u.JsonEncodeFailed||e===u.JsonDecodeFailed?t.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==u.BadRequest&&e!==u.UnknownResponseCode||t.i("Init call (session start) failed - bad request or unknown response."),null==s.instance.sdkConfig?null!=s.instance.sdkConfigCached?(t.i("Init call (session start) failed - using cached init values."),s.instance.sdkConfig=s.instance.sdkConfigCached):(t.i("Init call (session start) failed - using default init values."),s.instance.sdkConfig=s.instance.sdkConfigDefault):t.i("Init call (session start) failed - using cached init values."),s.instance.initAuthorized=!0);if(s.instance.clientServerTimeOffset=s.getSdkConfig().time_offset?s.getSdkConfig().time_offset:0,s.populateConfigurations(s.getSdkConfig()),!s.isEnabled())return t.w("Could not start session: SDK is disabled."),void n.stopEventQueue();n.ensureEventQueueIsRunning();var f=d.createGuid();s.instance.sessionId=f,s.instance.sessionStart=s.getClientTsAdjusted(),c.addSessionStartEvent();var v=n.getTimedBlockById(l.initTimedBlockId);null!=v&&(v.running=!1),l.initTimedBlockId=-1},l.resumeSessionAndStartQueue=function(){s.isInitialized()&&(t.i("Resuming session."),s.sessionIsStarted()||l.newSession())},l.isSdkReady=function(e,n,i){return void 0===n&&(n=!0),void 0===i&&(i=""),i&&(i+=": "),e&&!s.isInitialized()?(n&&t.w(i+"SDK is not initialized"),!1):e&&!s.isEnabled()?(n&&t.w(i+"SDK is disabled"),!1):!(e&&!s.sessionIsStarted())||(n&&t.w(i+"Session has not started yet"),!1)},l.initTimedBlockId=-1,l.methodMap={},l}();e.GameAnalytics=l}(n||(n={})),n.GameAnalytics.init();var o=n.GameAnalytics.gaCommand;module.exports=n;
},{}],"G1z3":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONST"),i=require("gameanalytics"),o=function(o){function n(){return o.call(this,{key:e.CONST.SCENES.LOAD,active:!0,pack:{files:[{type:"image",key:"loadBG",url:"./assets/00load/LTGBackground.png"},{type:"image",key:"loadLogo",url:"./assets/00load/LTGLogo.png"}]}})||this}return t(n,o),n.prototype.init=function(){var t=this;this.registry.set(e.CONST.REGISTRY.ADBLOCKENABLED,!1),PokiSDK.init().then(function(){}).catch(function(){t.registry.set(e.CONST.REGISTRY.ADBLOCKENABLED,!0)}),PokiSDK.setDebug(!1);/*var i,o,n=["top","indexOf","aHR0cHM6Ly9wb2tpLmNvbS9zaXRlbG9jaw==","hostname","length","location","LnBva2ktZ2RuLmNvbQ==","href"];i=n,o=430,function(t){for(;--t;)i.push(i.shift())}(++o);var a=function(t,e){return n[t-=0]};!function(){for(var t=["bG9jYWxob3N0","LnBva2kuY29t",a("0x0")],e=!1,i=window[a("0x7")][a("0x5")],o=0;o<t[a("0x6")];o++){var n=atob(t[o]);if(-1!==i[a("0x3")](n,i.length-n.length)){e=!0;break}}if(!e){var r=a("0x4"),s=atob(r);window.location[a("0x1")]=s,this[a("0x2")][a("0x7")]!==this[a("0x7")]&&(this[a("0x2")][a("0x7")]=this[a("0x7")])}}(),*/this.initAnalytics()},n.prototype.initAnalytics=function(){i.GameAnalytics.configureBuild(e.CONST.ANALYTICS.VERSION),i.GameAnalytics.initialize("2dc00cc60c153e19bab9092fb0d6e60a","77490239df4570c5030d4ef7f4b8f451e2bead36")},n.prototype.loadSceneImages=function(t){for(var e in t)this.load.image(t[e],t[e])},n.prototype.loadStartSceneImages=function(){this.loadSceneImages(e.CONST.BUTTONS),this.loadSceneImages(e.CONST.MENU)},n.prototype.loadFonts=function(){this.load.bitmapFont(e.CONST.FONT.ATLAS,e.CONST.FONT.ATLAS,e.CONST.FONT.XML)},n.prototype.loadStartAudio=function(){this.load.audio(e.CONST.AUDIO.SOUNDTRACK_SHORT,e.CONST.AUDIO.SOUNDTRACK_SHORT)},n.prototype.preload=function(){var t=this;this.add.image(0,-32,"loadBG").setOrigin(0,0),this.add.image(426.5,180,"loadLogo").setScale(.7),this.loadStartSceneImages(),this.loadFonts(),this.loadStartAudio();var e=this.add.graphics({fillStyle:{color:4763335}}).setDepth(1);this.add.graphics().fillStyle(16777215,.5).fillRect(150,this.game.renderer.height/2+90,this.game.renderer.width-300,50),PokiSDK.gameLoadingStart(),this.load.on("progress",function(i){PokiSDK.gameLoadingProgress({percentageDone:i}),e.fillRect(150,t.game.renderer.height/2+90,(t.game.renderer.width-300)*i,50)}),this.load.on("complete",function(){PokiSDK.gameLoadingFinished()}),this.hidePreloadScreen()},n.prototype.create=function(){this.registry.get(e.CONST.REGISTRY.ADBLOCKENABLED)?i.GameAnalytics.addDesignEvent("Ads:Adblock:Enabled"):i.GameAnalytics.addDesignEvent("Ads:Adblock:Disabled"),this.scene.launch(e.CONST.SCENES.SOUNDTRACK),this.scene.launch(e.CONST.SCENES.PROGRESSIVE_LOAD),this.scene.start(e.CONST.SCENES.MENU)},n.prototype.hidePreloadScreen=function(){document.getElementById("preloadDiv").style.display="none",document.getElementsByTagName("canvas")[0].style.zIndex=1},n}(Phaser.Scene);exports.LoadScene=o;
},{"../CONST":"HmIA","gameanalytics":"ublV"}],"OuK+":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONST"),i=function(i){function r(){var t=i.call(this,{key:e.CONST.SCENES.MENU})||this;return t.cloudMovementSpeed=25,t.virusMovementSpeed=45,t.ultraWinActive=!1,t.aboutActive=!1,t.slideshow=[{image:e.CONST.MENU.SWEAT_WIN},{image:e.CONST.MENU.WASH_WIN},{image:e.CONST.MENU.DIST_WIN},{image:e.CONST.MENU.ULTRA_WIN}],t}return t(r,i),r.prototype.init=function(){this.registry.set(e.CONST.REGISTRY.SKIPUSED,!0)},r.prototype.preload=function(){},r.prototype.create=function(){var t=this;console.log("Round start: MENU"),PokiSDK.roundStart(e.CONST.SCENES.MENU),this.createClouds(),this.createViruses(),this.add.image(0,0,e.CONST.MENU.BACKGROUND).setOrigin(0,0).setDepth(0),this.add.image(0,480,e.CONST.MENU.OVERLAY).setOrigin(0,1).setDepth(3),this.registry.get(e.CONST.REGISTRY.GAME_FINISHED)&&this.createUltraWinScreen();var i=this.add.image(425,305,e.CONST.BUTTONS.SKIP).setOrigin(0,0).setScale(.72,1.2).setDepth(2).setAlpha(1).setInteractive({useHandCursor:!0});i.setInteractive({useHandCursor:!0}),i.on("pointerup",function(){t.ultraWinActive||t.aboutActive||(console.log("Round end: MENU"),PokiSDK.roundEnd(e.CONST.SCENES.MENU),t.scene.start(e.CONST.SCENES.DISTANCING))}),this.createAboutButton()},r.prototype.createAboutButton=function(){var t=this;this.aboutActive=!1;var i=this.add.image(585,305,e.CONST.BUTTONS.SKIP).setOrigin(0,0).setScale(.72,1.2).setDepth(2).setAlpha(1).setInteractive({useHandCursor:!0});i.setInteractive({useHandCursor:!0}),i.on("pointerup",function(){t.ultraWinActive||t.aboutActive||t.showAboutSlideShow()})},r.prototype.showAboutSlideShow=function(){var t=this;this.aboutActive=!0;var i=this.add.image(0,0,e.CONST.MENU.BLACK).setOrigin(0,0).setDepth(99);i.currentSlide=-1,i.next=function(){if(i.currentSlide++,i.currentSlide>0&&(i.slide.disableInteractive(),i.slide.setAlpha(0)),i.currentSlide==t.slideshow.length-1&&(i.button=t.add.image(427,360,e.CONST.MENU.ULTRA_WIN_BUTTON).setDepth(101)),i.currentSlide>=t.slideshow.length)return t.aboutActive=!1,i.setAlpha(0),void i.button.setAlpha(0);i.slide=t.add.image(0,0,t.slideshow[i.currentSlide].image).setOrigin(0,0).setDepth(100).setInteractive(),i.slide.on("pointerup",function(){i.next()})},i.next()},r.prototype.createUltraWinScreen=function(){var t=this;this.registry.set(e.CONST.REGISTRY.GAME_FINISHED,!1),this.ultraWinActive=!0;var i=this.add.image(0,0,e.CONST.MENU.ULTRA_WIN).setOrigin(0,0).setDepth(100);i.bg=this.add.image(0,0,e.CONST.MENU.BLACK).setOrigin(0,0).setDepth(99),i.button=this.add.image(427,360,e.CONST.MENU.ULTRA_WIN_BUTTON).setDepth(101).setInteractive({useHandCursor:!0}),i.button.on("pointerup",function(){i.close()}),i.close=function(){t.ultraWinActive=!1,i.button.disableInteractive(),i.button.setAlpha(0),i.bg.setAlpha(0),i.setAlpha(0)}},r.prototype.createClouds=function(){for(var t=[],i=0;i<3;i++){var r=this.add.image(-this.game.renderer.width*(i-1),10,e.CONST.MENU.CLOUDS).setOrigin(0,0).setDepth(1);t.push(r)}this.clouds=this.add.group(t)},r.prototype.createViruses=function(){for(var t=[],i=0;i<3;i++){var r=this.add.image(-this.game.renderer.width*(i-1),-35,e.CONST.MENU.VIRUSES).setOrigin(0,0).setDepth(2);t.push(r)}this.viruses=this.add.group(t)},r.prototype.update=function(t,e){this.updateClouds(),this.updateViruses()},r.prototype.updateClouds=function(){var t=this;this.clouds&&this.clouds.getChildren().forEach(function(e){e.x+=t.cloudMovementSpeed*t.game.loop.delta/1e3,e.x>=t.game.renderer.width&&(e.x-=2*t.game.renderer.width)})},r.prototype.updateViruses=function(){var t=this;this.viruses&&this.viruses.getChildren().forEach(function(e){e.x+=t.virusMovementSpeed*t.game.loop.delta/1e3,e.x>=t.game.renderer.width&&(e.x-=2*t.game.renderer.width)})},r}(Phaser.Scene);exports.MenuScene=i;
},{"../CONST":"HmIA"}],"QxR8":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,s){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var s in e)e.hasOwnProperty(s)&&(t[s]=e[s])})(e,s)};return function(e,s){function o(){this.constructor=e}t(e,s),e.prototype=null===s?Object.create(s):(o.prototype=s.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONST"),s=function(s){function o(){return s.call(this,{key:e.CONST.SCENES.SOUNDTRACK})||this}return t(o,s),o.prototype.create=function(){this.music=this.sound.add(e.CONST.AUDIO.SOUNDTRACK_SHORT,{loop:!0,mute:!1}),this.music.play(),this.registry.set(e.CONST.SCENES.SOUNDTRACK,this)},o.prototype.pauseMusic=function(t){t?this.music.pause():this.music.resume()},o.prototype.switchMusic=function(){var t=this.sound.add(e.CONST.AUDIO.SOUNDTRACK,{loop:!0,mute:!1,seek:this.music.seek});t.play(),t.setSeek(this.music.seek),this.music.stop(),this.music=t},o}(Phaser.Scene);exports.SoundtrackScene=s;
},{"../CONST":"HmIA"}],"gvug":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function i(i,e){this.LoadType={JSON:1,IMAGE:2,AUDIO:3},this.loadScene=i,this.requiredFor=void 0===e.requiredFor?[]:e.requiredFor,this.imagesKey=void 0!==e.imagesKey&&e.imagesKey,this.animations=void 0!==e.animations&&e.animations,this.physics=void 0!==e.physics&&e.physics,this.audio=void 0!==e.audio&&e.audio,this.loadedCallback=void 0!==e.loadedCallback&&e.loadedCallback,this.loaded=!1,this.loading=!1,this.remainingFiles=[]}return i.prototype.Load=function(){this.loading=!0,this.loadFiles(this.imagesKey,this.LoadType.IMAGE),this.loadFiles(this.animations,this.LoadType.JSON),this.loadFiles(this.physics,this.LoadType.JSON),this.loadFiles(this.audio,this.LoadType.AUDIO),this.checkIfLoaded()},i.prototype.isBlockingScene=function(i){return!this.loaded&&-1!==this.requiredFor.indexOf(i)},i.prototype.handleFileComplete=function(i){var e=this.remainingFiles.indexOf(i);-1!==e&&(this.remainingFiles.splice(e,1),this.checkIfLoaded())},i.prototype.checkIfLoaded=function(){this.loaded=0==this.remainingFiles.length,this.loaded&&(this.loading=!1,this.loadedCallback&&this.loadedCallback())},i.prototype.loadFiles=function(i,e){if(i)for(var t in i)if(!this.isAlreadyLoaded(i[t],e)){switch(e){case this.LoadType.JSON:this.loadScene.load.json(i[t],i[t]);break;case this.LoadType.AUDIO:this.loadScene.load.audio(i[t],i[t]);break;case this.LoadType.IMAGE:this.loadScene.load.image(i[t],i[t])}this.remainingFiles.push(i[t])}},i.prototype.isLoaded=function(){return this.loaded},i.prototype.isLoading=function(){return this.loading},i.prototype.isAlreadyLoaded=function(i,e){var t=this.GetCacheDataForKey(i,e);return!(void 0===t||"__MISSING"===t)},i.prototype.GetCacheDataForKey=function(i,e){switch(e){case this.LoadType.JSON:return this.loadScene.cache.json.get(i);case this.LoadType.AUDIO:return this.loadScene.cache.audio.get(i);case this.LoadType.IMAGE:return this.loadScene.textures.get(i).key}},i}();exports.default=i;
},{}],"Y/W/":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("../CONST"),n=e(require("../components/ProgressiveLoadChunk")),o=function(e){function o(){var t=e.call(this,{key:r.CONST.SCENES.PROGRESSIVE_LOAD})||this;return t.loadChunks=[],t.currentChunk=0,t}return t(o,e),o.prototype.init=function(){var t=this;this.registry.set(r.CONST.SCENES.PROGRESSIVE_LOAD,this),this.loadChunks=[new n.default(this,{requiredFor:[r.CONST.SCENES.SWEAT],imagesKey:r.CONST.SWEAT,audio:[r.CONST.AUDIO.WOOSH,r.CONST.AUDIO.WIN,r.CONST.AUDIO.LOSE]}),new n.default(this,{requiredFor:[r.CONST.SCENES.WASH],imagesKey:r.CONST.WASH,audio:[r.CONST.AUDIO.BLING,r.CONST.AUDIO.RUB,r.CONST.AUDIO.GRAB,r.CONST.AUDIO.BOUNCE]}),new n.default(this,{requiredFor:[r.CONST.SCENES.DISTANCING],imagesKey:r.CONST.DISTANCING,physics:[r.CONST.PHYSICS.DISTANCE]}),new n.default(this,{requiredFor:[r.CONST.SCENES.CREDITS],imagesKey:r.CONST.CREDITS}),new n.default(this,{requiredFor:[r.CONST.SCENES.SOUNDTRACK],audio:[r.CONST.AUDIO.SOUNDTRACK],loadedCallback:function(){t.registry.get(r.CONST.SCENES.SOUNDTRACK).switchMusic()}})]},o.prototype.preload=function(){this.load.on("filecomplete",function(t,e){this.loadChunks[this.currentChunk].handleFileComplete(t)},this)},o.prototype.update=function(){this.loadNextChunk()},o.prototype.loadNextChunk=function(){if(!(this.currentChunk>=this.loadChunks.length)){var t=this.loadChunks[this.currentChunk];t.isLoaded()||t.isLoading()||(t.Load(),this.load.start()),t.isLoaded()&&this.currentChunk++}},o.prototype.isSceneLoaded=function(t){for(var e=0,r=this.loadChunks;e<r.length;e++){if(r[e].isBlockingScene(t))return!1}return!0},o}(Phaser.Scene);exports.ProgressiveLoadScene=o;
},{"../CONST":"HmIA","../components/ProgressiveLoadChunk":"gvug"}],"qoOj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,i,e){void 0===e&&(e=60),this.animTimer=0,this.isAnimating=!1,this.loop=!1,this.xOffset=0,this.yOffset=0,this.angleOffset=0,this.scaleMultiplierX=1,this.scaleMultiplierY=1,this.xOverride=0,this.yOverride=0,this.image=t,this.animationJson=i,this.animFPS=e,this.animTimer=0,this.isAnimating=!1,this.duration=1e3*i.frames.length/e,this.image.animation=this}return t.prototype.setLoop=function(t){return this.loop=t,this},t.prototype.setOffset=function(t,i){return this.xOffset=t,this.yOffset=i,this},t.prototype.setAngleOffset=function(t){return this.angleOffset=t,this},t.prototype.setScaleMultiplier=function(t,i){return void 0===i&&(i=0),this.scaleMultiplierX=t,this.scaleMultiplierY=0===i?t:i,this},t.prototype.setDepth=function(t){return this.image.setDepth(t),this},t.prototype.setScrollFactor=function(t,i){return this.image.setScrollFactor(t,i),this},t.prototype.setDraggable=function(t){return this.image.setInteractive({useHandCursor:!0}),t.setDraggable(this.image),this},t.prototype.setPositionOverride=function(t,i,e){return void 0===e&&(e=!0),this.xOverride=t,e&&(this.yOverride=i),this},t.prototype.GetPositionOverride=function(){return{x:this.xOverride,y:this.yOverride}},t.prototype.GetOffset=function(){return{x:this.xOffset,y:this.yOffset}},t.prototype.update=function(t){this.isAnimating&&(this.positionImageOnAnimation(this.animTimer),this.updateTimer(t))},t.prototype.updateTimer=function(t){this.animTimer+=t,this.animTimer>=this.duration&&(this.loop?this.animTimer=0:this.isAnimating=!1)},t.prototype.start=function(){return this.isAnimating=!0,this},t.prototype.pause=function(){return this.isAnimating=!1,this},t.prototype.stop=function(){return this.animTimer=0,this.isAnimating=!1,this},t.prototype.setAnimation=function(t){return this.animationJson=t,this.animTimer=0,this.duration=1e3*t.frames.length/this.animFPS,this},t.prototype.positionImageOnAnimation=function(t){var i=Math.floor(t*(this.animFPS/1e3));i>=this.animationJson.frames.length&&(i=this.animationJson.frames.length-1);var e=this.animationJson.frames[i];this.image.setPosition(e.x+this.xOffset+this.xOverride,e.y+this.yOffset+this.yOverride).setScale(parseFloat(e.scaleX)*this.scaleMultiplierX,parseFloat(e.scaleY)*this.scaleMultiplierY).setAngle(parseFloat(e.angle)+this.angleOffset)},t}();exports.UnityAnimation=t;
},{}],"Qwd5":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function s(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../CONST"),i=require("./Animation"),s=require("gameanalytics"),a=function(a){function r(t){var e=a.call(this,{key:t.sceneName})||this;return e.sceneName=t.sceneName,e.nextScene=t.nextScene,e.duration=t.duration,e.showCountdown=void 0===t.showCountdown||t.showCountdown,e.startScreenColor=t.startScreenColor,e.startText=t.startText,e.startTextYOrigin=void 0===t.startTextYOrigin?.25:t.startTextYOrigin,e.startTextColor=t.startTextColor,e.startTextSize=void 0===t.startTextSize?150:t.startTextSize,e.failImage=t.loseScreen?t.loseScreen:"",e.winImage=t.winScreen?t.winScreen:"",e.timeToStart=void 0===t.timeToStart?1e3:t.timeToStart,e.loseButtonPositions=t.loseButtons,e.winButtonPositions=t.winButtons,e.waitingToLoad=!1,e}return t(r,a),r.prototype.init=function(){this.animations=[],this.progressiveLoadScene=this.registry.get(e.CONST.SCENES.PROGRESSIVE_LOAD),this._init()},r.prototype.preload=function(){this._preload()},r.prototype.create=function(){this.createStartUI(),this.createGameplayUI(),this.createLoseUI(),this.createWinUI(),this.createLoadUI(),this.changeGameState(e.CONST.GAMESTATE.START);var t=this.areAllAssetsLoaded();t?this._create():this.waitingToLoad=!0,this.sound.mute=!0,this.sound.mute=!1,t?this.createStartTimer():(this.createWaitingUI(),this.waitingToLoad=!0)},r.prototype.createWaitingUI=function(){var t=this.add.image(this.game.renderer.width/2,this.game.renderer.height-50,e.CONST.BUTTONS.SPINNER).setDepth(1002).setTint(this.startTextColor).setVisible(!0);this.tweens.add({targets:t,angle:"+=360",duration:1e3,ease:"Linear",repeat:-1})},r.prototype.createStartUI=function(){var t=this.add.graphics({fillStyle:{color:this.startScreenColor}}).fillRect(0,0,this.game.renderer.width,this.game.renderer.height).setDepth(1e3).setVisible(!1);this.startTextObject=this.add.bitmapText(this.game.renderer.width/2,this.game.renderer.height/2,e.CONST.FONT.ATLAS,this.startText,this.startTextSize).setOrigin(.5,this.startTextYOrigin).setDepth(1001).setVisible(!1).setTint(this.startTextColor).setCenterAlign(),this.startUI=this.add.group([t,this.startTextObject],{active:!1}),this.startUI.getChildren().forEach(function(t){t.setScrollFactor(0)})},r.prototype.createGameplayUI=function(){this.progressBar=this.add.graphics({fillStyle:{color:1381653,alpha:this.showCountdown?.7:0}}).fillRect(0,0,this.game.renderer.width,14).setDepth(100).setVisible(!1),this.progressBarBackground=this.add.graphics({fillStyle:{color:2697513,alpha:this.showCountdown?.3:0}}).fillRect(0,0,this.game.renderer.width,14).setDepth(99).setVisible(!1),this.gameplayUI=this.add.group([this.progressBar,this.progressBarBackground],{active:!1}),this.gameplayUI.getChildren().forEach(function(t){t.setScrollFactor(0)})},r.prototype.createLoseUI=function(){var t=this,i=[];if(""!=this.failImage){var s=this.add.image(0,0,this.failImage).setOrigin(0,0).setDepth(1002).setVisible(!1);i.push(s)}if(this.registry.get(e.CONST.REGISTRY.ADBLOCKENABLED)||this.registry.get(e.CONST.REGISTRY.SKIPUSED)){var a=this.addButton(this.loseButtonPositions.normalNoSkip.x,this.loseButtonPositions.normalNoSkip.y,e.CONST.BUTTONS.TRYAGAIN,this.loseButtonPositions.normalNoSkip.scale,function(){t.restartGame()});i.push(a)}else{var r=this.addButton(this.loseButtonPositions.normalWithSkip.x,this.loseButtonPositions.normalWithSkip.y,e.CONST.BUTTONS.TRYAGAIN,this.loseButtonPositions.normalWithSkip.scale,function(){t.restartGame()});i.push(r);var o=this.addButton(this.loseButtonPositions.skip.x,this.loseButtonPositions.skip.y,e.CONST.BUTTONS.SKIP,this.loseButtonPositions.skip.scale,function(){t.skipLevel()});i.push(o)}this.loseUI=this.add.group(i,{active:!1}),this.loseUI.getChildren().forEach(function(t){t.setScrollFactor(0)})},r.prototype.createWinUI=function(){var t=this,i=[];if(""!=this.winImage){var s=this.add.image(0,0,this.winImage).setOrigin(0,0).setDepth(1005).setVisible(!1);i.push(s)}var a=this.addButton(this.winButtonPositions.continue.x,this.winButtonPositions.continue.y,e.CONST.BUTTONS.TRYAGAIN,this.winButtonPositions.continue.scale,function(){t.loadNextScene()});i.push(a),this.winUI=this.add.group(i,{active:!1}),this.winUI.getChildren().forEach(function(t){t.setScrollFactor(0)})},r.prototype.createLoadUI=function(){var t=this.scene.get(this.nextScene),i=this.add.graphics({fillStyle:{color:t.startScreenColor}}).fillRect(0,0,this.game.renderer.width,this.game.renderer.height).setDepth(1e3).setVisible(!1),s=this.add.bitmapText(this.game.renderer.width/2,this.game.renderer.height/2,e.CONST.FONT.ATLAS,t.startText,150).setOrigin(.5,t.startTextYOrigin).setDepth(1001).setVisible(!1).setTint(t.startTextColor).setCenterAlign(),a=this.add.image(this.game.renderer.width/2,this.game.renderer.height-50,e.CONST.BUTTONS.SPINNER).setDepth(1002).setTint(t.startTextColor).setVisible(!1);this.tweens.add({targets:a,angle:"+=360",duration:1e3,ease:"Linear",repeat:-1}),this.loadUI=this.add.group([i,s,a],{active:!1}),this.loadUI.getChildren().forEach(function(t){t.setScrollFactor(0)})},r.prototype.addButton=function(t,e,i,s,a){var r=this.add.image(t,e,i).setScale(s,s).setAlpha(1).setVisible(!1).setDepth(1003).setInteractive({useHandCursor:!0});return r.on("pointerdown",a,this),r.handlePointerOver=function(t){},r.handlePointerOut=function(t){},r},r.prototype.changeGameState=function(t){var i=!0;switch(t===this.currentState&&(i=!1),t){case e.CONST.GAMESTATE.START:this.setChildrenVisible(this.startUI,!0);break;case e.CONST.GAMESTATE.PLAYING:PokiSDK.gameplayStart(),console.log("Round start: "+this.sceneName),PokiSDK.roundStart(this.sceneName),this.setChildrenVisible(this.gameplayUI,!0);break;case e.CONST.GAMESTATE.LOSE:case e.CONST.GAMESTATE.WIN:break;case e.CONST.GAMESTATE.LOADNEXTLEVEL:this.setChildrenVisible(this.loadUI,!0);break;default:i=!1}if(i){switch(this.currentState){case e.CONST.GAMESTATE.START:this.setChildrenVisible(this.startUI,!1);break;case e.CONST.GAMESTATE.PLAYING:PokiSDK.gameplayStop(),PokiSDK.roundEnd(this.sceneName),console.log("Round end: "+this.sceneName),this.setChildrenVisible(this.gameplayUI,!1);break;case e.CONST.GAMESTATE.LOSE:this.setChildrenVisible(this.loseUI,!1);break;case e.CONST.GAMESTATE.WIN:}this.currentState=t}},r.prototype.showLoseUI=function(t){this.setChildrenVisible(this.loseUI,t)},r.prototype.showWinUI=function(t){this.setChildrenVisible(this.winUI,t)},r.prototype.setChildrenVisible=function(t,e){t.getChildren().forEach(function(t){t.setVisible(e)})},r.prototype.update=function(t,i){this.waitingToLoad?this.areAllAssetsLoaded()&&(this.waitingToLoad=!1,this.restartGame()):(this.isCurrentState(e.CONST.GAMESTATE.PLAYING)&&this.updateGameplayTimer(),this.isCurrentState(e.CONST.GAMESTATE.LOADNEXTLEVEL)&&this.areAllAssetsLoaded(this.nextScene)&&this.loadNextScene(),this._update(t,i),this.updateAnimations(i))},r.prototype.updateGameplayTimer=function(){this.gameplayTimer&&this.progressBar.setX(-this.game.renderer.width*this.gameplayTimer.getProgress()).setVisible(!0)},r.prototype.updateAnimations=function(t){this.animations.forEach(function(e){e.update(t)})},r.prototype.createStartTimer=function(){this.startTimer=this.time.addEvent({delay:this.timeToStart,callback:this.startGame,callbackScope:this})},r.prototype.startGame=function(){this.changeGameState(e.CONST.GAMESTATE.PLAYING),this.onGameStarted(),this.clearTimers(),this.gameplayTimer=this.time.addEvent({delay:this.duration,callback:this.triggerTimeout,callbackScope:this}),s.GameAnalytics.addProgressionEvent(s.EGAProgressionStatus.Start,this.sceneName)},r.prototype.onGameStarted=function(){},r.prototype.triggerTimeout=function(){this.clearTimers(),this._timeout()},r.prototype.clearTimers=function(){this.startTimer&&(this.startTimer.paused=!0,this.startTimer.remove()),this.gameplayTimer&&(this.gameplayTimer.paused=!0,this.gameplayTimer.remove()),this.winGameTimer&&(this.winGameTimer.paused=!0,this.winGameTimer.remove())},r.prototype.winGame=function(t){void 0===t&&(t=0),this.changeGameState(e.CONST.GAMESTATE.WIN),this.clearTimers(),this.winGameTimer=this.time.addEvent({delay:t,callback:this.handleWinGame,callbackScope:this}),s.GameAnalytics.addProgressionEvent(s.EGAProgressionStatus.Complete,this.sceneName)},r.prototype.handleWinGame=function(){PokiSDK.happyTime(.5),this.showWinUI(!0),this._afterWin()},r.prototype.loadNextScene=function(){this.areAllAssetsLoaded(this.nextScene)?(this.scene.stop(this.sceneName),this.scene.start(this.nextScene)):this.changeGameState(e.CONST.GAMESTATE.LOADNEXTLEVEL)},r.prototype.loseGame=function(t){void 0===t&&(t=0),this.changeGameState(e.CONST.GAMESTATE.LOSE),this.clearTimers(),this.winGameTimer=this.time.addEvent({delay:t,callback:this.handleLoseGame,callbackScope:this}),s.GameAnalytics.addProgressionEvent(s.EGAProgressionStatus.Fail,this.sceneName)},r.prototype.handleLoseGame=function(){this.showLoseUI(!0),this._afterLoss()},r.prototype.restartGame=function(){this.scene.stop(this.sceneName),this.scene.start(this.sceneName)},r.prototype.skipLevel=function(){var t=this;this.sound.mute=!0,PokiSDK.rewardedBreak().then(function(i){t.sound.mute=!1,i?(s.GameAnalytics.addDesignEvent("Ads:Rewarded:Completed"),t.sceneName==e.CONST.SCENES.DISTANCING&&t.registry.set(e.CONST.REGISTRY.GAME_FINISHED,!0),t.loadNextScene(),t.registry.set(e.CONST.REGISTRY.SKIPUSED,!0)):s.GameAnalytics.addDesignEvent("Ads:Rewarded:Failed")})},r.prototype.isCurrentState=function(t){return this.currentState===t},r.prototype.changeGameplayTimerDuration=function(t){this.gameplayTimer&&(this.gameplayTimer.elapsed-=t)},r.prototype.addAnimation=function(t,e,s){void 0===s&&(s=60);var a=this.add.image(0,0,t).setScale(0,0),r=this.cache.json.get(e),o=new i.UnityAnimation(a,r,s);return this.animations.push(o),o},r.prototype.getUnityY=function(t){return 4.5-9*t/480},r.prototype.getRandomInt=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},r.prototype.getRandomNumber=function(t,e){return t+Math.random()*(e-t)},r.prototype.getDetune=function(){return this.getRandomInt(-200,200)},r.prototype.areAllAssetsLoaded=function(t){return void 0===t&&(t=this.sceneName),this.progressiveLoadScene.isSceneLoaded(t)},r}(Phaser.Scene);exports.MinigameScene=a;
},{"../../CONST":"HmIA","./Animation":"qoOj","gameanalytics":"ublV"}],"QN9X":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function s(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../CONST"),i=require("../generic/MinigameScene"),s=function(i){function s(){var e=i.call(this,{sceneName:t.CONST.SCENES.SWEAT,duration:15e3,showCountdown:!1,startScreenColor:11858431,startText:"MANAGE\nYOUR\nFEVER!",startTextColor:3289650,startTextYOrigin:.45,loseScreen:t.CONST.SWEAT.LOSE,winScreen:t.CONST.MENU.SWEAT_WIN,nextScene:t.CONST.SCENES.CREDITS,loseButtons:{normalNoSkip:{x:426.5,y:349,scale:1},normalWithSkip:{x:340,y:349,scale:1},skip:{x:543,y:349,scale:1}},winButtons:{continue:{x:507,y:337,scale:.96}}})||this;e.spawnRate={min:300,max:700},e.dropSize={min:.6,max:1.2},e.dropTimeToFail=1500,e.dropTimeToDestroy=300,e.dropTimeToLive=4e3,e.dropSlideSpeed={min:2,max:10},e.feverScoreLimits={win:0,lose:100},e.dropFeverValue=5,e.dropFeverPerSecond=2.5,e.animFPS=60,e.spawnAreas=[{x1:283,x2:546,y1:186,y2:257},{x1:337,x2:530,y1:257,y2:409},{x1:245,x2:283,y1:235,y2:305},{x1:336,x2:283,y1:306,y2:370},{x1:258,x2:282,y1:306,y2:341},{x1:530,x2:603,y1:306,y2:340},{x1:546,x2:606,y1:225,y2:259},{x1:575,x2:611,y1:259,y2:305},{x1:530,x2:574,y1:341,y2:378},{x1:298,x2:357,y1:146,y2:186}],e.feverScore=50,e.spawnTimer=0,e.drops=[],e.hasWon=!1,e.hasLost=!1;var s=0;return e.spawnAreas.forEach(function(e){s+=(e.x2-e.x1)*(e.y2-e.y1),e.areaSum=s}),e}return e(s,i),s.prototype._init=function(){this.feverScore=50,this.spawnTimer=0,this.drops=[],this.hasWon=!1,this.hasLost=!1},s.prototype._preload=function(){},s.prototype._create=function(){this.input.topOnly=!1,this.add.image(0,0,t.CONST.SWEAT.BACKGROUND).setDepth(0).setOrigin(0,0),this.createParticles(),this.feverImg=this.add.image(242,130,t.CONST.SWEAT.FEVER).setDepth(1).setOrigin(0,0),this.add.bitmapText(135,443,t.CONST.FONT.ATLAS,"SWIPE!",90).setOrigin(.5,.5).setTint(3892264).setAlpha(.8).setDepth(1).setRightAlign()},s.prototype.visualizeSpawnAreas=function(){var e=this;this.spawnAreas.forEach(function(t){e.add.graphics({fillStyle:{color:255,alpha:.3}}).fillRect(t.x1,t.y1,t.x2-t.x1,t.y2-t.y1)})},s.prototype.createParticles=function(){var e=this.add.particles(t.CONST.SWEAT.PARTICLE).setDepth(9);this.popParticles=e.createEmitter({active:!0,visible:!0,on:!1,frequency:-1,gravityY:1e3,timeScale:1,blendMode:0,accelerationY:-200,lifespan:500,scale:{start:.2,end:0,ease:"Quad.easeOut"},speed:{min:-250,max:250,ease:"Linear"}})},s.prototype._update=function(e,i){this.drops.forEach(function(e){e.update(i)}),this.isCurrentState(t.CONST.GAMESTATE.PLAYING)&&(this.spawnTimer-=i,this.spawnTimer<=0&&(this.spawnTimer=this.calculateNewTimer(),this.spawnDrop()),this.feverImg.alpha=this.feverScore/100)},s.prototype.calculateNewTimer=function(){return this.getRandomNumber(this.spawnRate.min,this.spawnRate.max)},s.prototype.spawnDrop=function(){var e=this,i=this.calculateNewSpawnPosition(),s=this.add.image(i.x,i.y,t.CONST.SWEAT.DROP).setDepth(10).setInteractive({useHandCursor:!0}).setScale(0,0);s.on("pointerover",function(){s.destroy()}),s.lifeTime=0,s.deathTime=0,s.startSize=this.getRandomNumber(this.dropSize.min,this.dropSize.max),s.isAlive=!0,s.failed=!1,s.speed=this.getRandomNumber(this.dropSlideSpeed.min,this.dropSlideSpeed.max),this.tweens.add({targets:s,scaleX:s.startSize,scaleY:s.startSize,ease:"Quad.easeIn",duration:150,repeat:0,yoyo:!1}),s.update=function(t){if(s.isAlive)e.increaseFeverScore(t),s.y+=t*s.speed/1e3,s.lifeTime+=t,s.lifeTime>e.dropTimeToLive&&(s.failed=!0,s.destroy());else{if(s.failed&&(s.y+=t*s.speed/1e3,s.speed=s.speed+500*t/1e3),s.deathTime+=t,s.deathTime>(s.failed?e.dropTimeToFail:e.dropTimeToDestroy))return void s.setVisible(!1);var i=s.startSize-s.deathTime/(s.failed?e.dropTimeToFail:e.dropTimeToDestroy)*s.startSize;s.setScale(i,i)}},s.destroy=function(){s.isAlive&&(s.isAlive=!1,s.setInteractive(!1),s.failed?s.speed=20:(e.sound.play(t.CONST.AUDIO.WOOSH,{detune:e.getDetune()}),e.popParticles.explode(30,s.x,s.y),e.feverScore-=e.dropFeverValue))},this.drops.push(s)},s.prototype.increaseFeverScore=function(e){this.feverScore+=e*this.dropFeverPerSecond/1e3,this.feverScore>this.feverScoreLimits.lose?this.triggerLoss():this.feverScore<=this.feverScoreLimits.win&&this.triggerWin()},s.prototype.calculateNewSpawnPosition=function(){for(var e=this.spawnAreas[this.spawnAreas.length-1].areaSum,t=Math.floor(Math.random()*e),i=0;i<this.spawnAreas.length;i++)if(this.spawnAreas[i].areaSum>=t)return{x:this.randomIntFromInterval(this.spawnAreas[i].x1,this.spawnAreas[i].x2),y:this.randomIntFromInterval(this.spawnAreas[i].y1,this.spawnAreas[i].y2)}},s.prototype.randomIntFromInterval=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},s.prototype._timeout=function(){},s.prototype._afterLoss=function(){},s.prototype._afterWin=function(){},s.prototype.triggerWin=function(){this.hasWon||(this.hasWon=!0,this.winGame(2300),this.sound.play(t.CONST.AUDIO.WIN),this.endGameAnim(!0))},s.prototype.triggerLoss=function(){this.hasLost||(this.hasLost=!0,this.sound.play(t.CONST.AUDIO.LOSE),this.loseGame(1500),this.endGameAnim(!1))},s.prototype.endGameAnim=function(e){e?this.endImage=this.add.image(440,355,t.CONST.SWEAT.BRACES).setDepth(20).setScale(0):(this.endImage=this.add.image(425,345,t.CONST.SWEAT.BRACES).setDepth(20).setScale(0),this.endImage.setRotation(Math.PI));var i=e?1:.7;this.tweens.timeline({targets:this.endImage,ease:"Cubic.easeInOut",duration:1e3,loop:0,tweens:[{targets:this.endImage,scaleX:1.3*i,scaleY:1.3*i,rotation:"-=0.2",duration:700,repeat:0,yoyo:!1},{targets:this.endImage,scaleX:i,scaleY:i,rotation:"+=0.2",duration:300,repeat:0,yoyo:!1}]})},s}(i.MinigameScene);exports.SweatScene=s;
},{"../../CONST":"HmIA","../generic/MinigameScene":"Qwd5"}],"F5in":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,a){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(t,a)};return function(t,a){function n(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(n.prototype=a.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../CONST"),a=require("../generic/MinigameScene"),n=function(a){function n(){var e=a.call(this,{sceneName:t.CONST.SCENES.WASH,duration:2e4,showCountdown:!1,startScreenColor:11858431,startText:"WASH\nYOUR\nHANDS!",startTextColor:3289650,startTextYOrigin:.45,loseScreen:t.CONST.WASH.LOSE,winScreen:t.CONST.MENU.WASH_WIN,nextScene:t.CONST.SCENES.SWEAT,loseButtons:{normalNoSkip:{x:426.5,y:349,scale:1},normalWithSkip:{x:340,y:349,scale:1},skip:{x:543,y:349,scale:1}},winButtons:{continue:{x:241,y:358,scale:.99}}})||this;return e.leftHandConfig={x:305,y:480,image:t.CONST.WASH.HAND_LEFT,depth:3.9,originX:.27,originY:.62,polygons:[[46,36,45,62,30,92,23.754789352416992,70.7816162109375,24,36,37,28],[45,62,116.09195709228516,20.590042114257812,139.46360778808594,44.34483337402344,127.20306396484375,86.49041748046875,112.26053619384766,107.94635772705078,66,121,48,108,30,92],[134.86590576171875,35.14942932128906,116.09195709228516,20.590042114257812,123.75479125976562,17.52490234375,134,23],[150,61,127.20306396484375,86.49041748046875,139.46360778808594,44.34483337402344,149,48],[66,121,112.26053619384766,107.94635772705078,91,123],[70.11494445800781,2.96551513671875,102,1,108.42911529541016,6.0306549072265625,110,19,57.47126388549805,27.10345458984375,58.237548828125,14.842910766601562,62.45210647583008,6.413787841796875],[110,19,116.09195709228516,20.590042114257812,54,50,57.47126388549805,27.10345458984375],[139.46360778808594,44.34483337402344,116.09195709228516,20.590042114257812,134.86590576171875,35.14942932128906],[54,50,116.09195709228516,20.590042114257812,45,62]],movement:{xDiffP:100,xDiffN:-100,yDiffP:50,yDiffN:-15,angle:15,timeRange:{min:750,max:1500},startDelay:0},bubbles:[{image:t.CONST.WASH.BUBBLE3,x:37,y:-147,depth:4,score:1,angle:0},{image:t.CONST.WASH.BUBBLE5,x:80,y:-206,depth:4,score:2,angle:0},{image:t.CONST.WASH.BUBBLE2,x:116,y:-178,depth:4,score:3,angle:0},{image:t.CONST.WASH.BUBBLE6,x:96,y:-153,depth:4,score:4,angle:0},{image:t.CONST.WASH.BUBBLE0,x:77,y:-124,depth:4,score:5,angle:0},{image:t.CONST.WASH.BUBBLE4,x:42,y:-128,depth:4,score:6,angle:0},{image:t.CONST.WASH.BUBBLE7,x:75,y:-198,depth:4,score:7,angle:0},{image:t.CONST.WASH.BUBBLE8,x:60,y:-244,depth:4,score:8,angle:0},{image:t.CONST.WASH.BUBBLE1,x:39,y:-233,depth:4,score:9,angle:0},{image:t.CONST.WASH.BUBBLE9,x:92,y:-206,depth:4,score:10,angle:0},{image:t.CONST.WASH.BUBBLE5,x:76,y:-179,depth:4,score:11,angle:0},{image:t.CONST.WASH.BUBBLE0,x:66,y:-147,depth:4,score:12,angle:0},{image:t.CONST.WASH.BUBBLE7,x:27,y:-173,depth:4,score:13,angle:0},{image:t.CONST.WASH.BUBBLE6,x:0,y:-185,depth:4,score:14,angle:0},{image:t.CONST.WASH.BUBBLE9,x:1,y:-216,depth:4,score:15,angle:0},{image:t.CONST.WASH.BUBBLE1,x:56,y:-185,depth:4,score:16,angle:0},{image:t.CONST.WASH.BUBBLE2,x:80,y:-162,depth:4,score:17,angle:0},{image:t.CONST.WASH.BUBBLE8,x:117,y:-171,depth:4,score:18,angle:0},{image:t.CONST.WASH.BUBBLE3,x:100,y:-211,depth:4,score:19,angle:0},{image:t.CONST.WASH.BUBBLE4,x:82,y:-149,depth:4,score:20,angle:0},{image:t.CONST.WASH.BUBBLE1,x:42,y:-120,depth:4,score:21,angle:0},{image:t.CONST.WASH.BUBBLE6,x:17,y:-141,depth:4,score:22,angle:0},{image:t.CONST.WASH.BUBBLE9,x:54,y:-187,depth:4,score:23,angle:0},{image:t.CONST.WASH.BUBBLE8,x:88,y:-188,depth:4,score:24,angle:0},{image:t.CONST.WASH.BUBBLE2,x:33,y:-194,depth:4,score:25,angle:0},{image:t.CONST.WASH.BUBBLE3,x:74,y:-230,depth:4,score:26,angle:0},{image:t.CONST.WASH.BUBBLE5,x:34,y:-206,depth:4,score:27,angle:0},{image:t.CONST.WASH.BUBBLE4,x:4,y:-160,depth:4,score:28,angle:0},{image:t.CONST.WASH.BUBBLE2,x:47,y:-158,depth:4,score:29,angle:0},{image:t.CONST.WASH.BUBBLE0,x:63,y:-126,depth:4,score:30,angle:0},{image:t.CONST.WASH.BUBBLE6,x:66,y:-221,depth:4,score:31,angle:0},{image:t.CONST.WASH.BUBBLE4,x:15,y:-196,depth:4,score:32,angle:0},{image:t.CONST.WASH.BUBBLE1,x:95,y:-182,depth:4,score:33,angle:0},{image:t.CONST.WASH.BUBBLE5,x:76,y:-179,depth:4,score:34,angle:0},{image:t.CONST.WASH.BUBBLE0,x:66,y:-147,depth:4,score:35,angle:0},{image:t.CONST.WASH.BUBBLE7,x:27,y:-173,depth:4,score:36,angle:0},{image:t.CONST.WASH.BUBBLE6,x:0,y:-185,depth:4,score:37,angle:0},{image:t.CONST.WASH.BUBBLE2,x:116,y:-178,depth:4,score:38,angle:0},{image:t.CONST.WASH.BUBBLE5,x:76,y:-179,depth:4,score:39,angle:0},{image:t.CONST.WASH.BUBBLE0,x:66,y:-147,depth:4,score:40,angle:0},{image:t.CONST.WASH.BUBBLE3,x:37,y:-147,depth:4,score:41,angle:0},{image:t.CONST.WASH.BUBBLE5,x:80,y:-206,depth:4,score:42,angle:0},{image:t.CONST.WASH.BUBBLE2,x:116,y:-178,depth:4,score:43,angle:0},{image:t.CONST.WASH.BUBBLE6,x:96,y:-153,depth:4,score:44,angle:0},{image:t.CONST.WASH.BUBBLE0,x:77,y:-124,depth:4,score:45,angle:0},{image:t.CONST.WASH.BUBBLE4,x:42,y:-128,depth:4,score:46,angle:0},{image:t.CONST.WASH.BUBBLE7,x:75,y:-198,depth:4,score:47,angle:0},{image:t.CONST.WASH.BUBBLE8,x:60,y:-244,depth:4,score:48,angle:0},{image:t.CONST.WASH.BUBBLE1,x:39,y:-233,depth:4,score:49,angle:0},{image:t.CONST.WASH.BUBBLE7,x:27,y:-173,depth:4,score:50,angle:0}],winPosition:{x:355,y:365,angle:0,timeToMove:1e3},losePosition:{x:305,y:780,angle:0,timeToMove:1500}},e.rightHandConfig={x:570,y:480,image:t.CONST.WASH.HAND_RIGHT,originX:.73,originY:.62,depth:5,polygons:[[55,1,86,3,93.48658752441406,12.6934814453125,97,41,41.762451171875,16.908050537109375,43,4],[128.3524932861328,37.21455383300781,129.8850555419922,57.13792419433594,127,81,120,95,108.42911529541016,104.64750671386719,106,31,118,27],[30.65134048461914,18.44061279296875,38.31417465209961,20.3563232421875,97,41,107,63,21.072797775268555,41.812255859375,18.00766372680664,29.934860229492188,22,20],[70,120,46.74329376220703,113.84291076660156,28,95,3.4482758045196533,62.1187744140625,21.072797775268555,41.812255859375,107,63,108.42911529541016,104.64750671386719],[4.9808430671691895,46.026824951171875,21.072797775268555,41.812255859375,3.4482758045196533,62.1187744140625,.7662835121154785,54.839080810546875],[97,41,38.31417465209961,20.3563232421875,41.762451171875,16.908050537109375]],movement:{xDiffP:100,xDiffN:-100,yDiffP:50,yDiffN:-15,angle:15,timeRange:{min:1e3,max:1500},startDelay:500},bubbles:[{image:t.CONST.WASH.BUBBLE6,x:-35,y:-227,depth:5.1,score:1,angle:0},{image:t.CONST.WASH.BUBBLE8,x:-111,y:-187,depth:5.2,score:2,angle:0},{image:t.CONST.WASH.BUBBLE5,x:-76,y:-177,depth:5.3,score:3,angle:0},{image:t.CONST.WASH.BUBBLE4,x:-36,y:-165,depth:5.4,score:4,angle:0},{image:t.CONST.WASH.BUBBLE3,x:-34,y:-199,depth:5.5,score:5,angle:0},{image:t.CONST.WASH.BUBBLE9,x:-3,y:-197,depth:5.6,score:6,angle:0},{image:t.CONST.WASH.BUBBLE1,x:-3,y:-154,depth:5.7,score:7,angle:0},{image:t.CONST.WASH.BUBBLE7,x:-40,y:-130,depth:5.8,score:8,angle:0},{image:t.CONST.WASH.BUBBLE0,x:-76,y:-120,depth:5.9,score:9,angle:0},{image:t.CONST.WASH.BUBBLE2,x:-76,y:-175,depth:6,score:10,angle:0},{image:t.CONST.WASH.BUBBLE5,x:-93,y:-197,depth:6.1,score:12,angle:0},{image:t.CONST.WASH.BUBBLE7,x:-67,y:-199,depth:6.2,score:13,angle:0},{image:t.CONST.WASH.BUBBLE2,x:-67,y:-167,depth:6.3,score:14,angle:0},{image:t.CONST.WASH.BUBBLE0,x:-43,y:-159,depth:6.4,score:15,angle:0},{image:t.CONST.WASH.BUBBLE3,x:-31,y:-175,depth:6.5,score:16,angle:0},{image:t.CONST.WASH.BUBBLE4,x:-33,y:-211,depth:6.6,score:17,angle:0},{image:t.CONST.WASH.BUBBLE1,x:-76,y:-220,depth:6.7,score:18,angle:0},{image:t.CONST.WASH.BUBBLE9,x:-69,y:-156,depth:6.8,score:19,angle:0},{image:t.CONST.WASH.BUBBLE6,x:-29,y:-130,depth:6.9,score:20,angle:0},{image:t.CONST.WASH.BUBBLE8,x:-56,y:-118,depth:7,score:21,angle:0},{image:t.CONST.WASH.BUBBLE8,x:-79,y:-143,depth:7,score:22,angle:0},{image:t.CONST.WASH.BUBBLE6,x:-104,y:-165,depth:7,score:23,angle:0},{image:t.CONST.WASH.BUBBLE3,x:-95,y:-183,depth:7,score:24,angle:0},{image:t.CONST.WASH.BUBBLE2,x:-47,y:-182,depth:7,score:25,angle:0},{image:t.CONST.WASH.BUBBLE4,x:-35,y:-183,depth:7,score:26,angle:0},{image:t.CONST.WASH.BUBBLE0,x:-16,y:-173,depth:7,score:27,angle:0},{image:t.CONST.WASH.BUBBLE9,x:-14,y:-150,depth:7,score:28,angle:0},{image:t.CONST.WASH.BUBBLE7,x:-33,y:-148,depth:7,score:29,angle:0},{image:t.CONST.WASH.BUBBLE5,x:-2,y:-178,depth:7,score:30,angle:0},{image:t.CONST.WASH.BUBBLE1,x:-11,y:-195,depth:7,score:31,angle:0},{image:t.CONST.WASH.BUBBLE3,x:-52,y:-220,depth:7,score:32,angle:0},{image:t.CONST.WASH.BUBBLE9,x:-101,y:-216,depth:7,score:33,angle:0},{image:t.CONST.WASH.BUBBLE1,x:-90,y:-151,depth:7,score:34,angle:0},{image:t.CONST.WASH.BUBBLE4,x:-26,y:-189,depth:7,score:35,angle:0},{image:t.CONST.WASH.BUBBLE8,x:-75,y:-145,depth:7,score:36,angle:0},{image:t.CONST.WASH.BUBBLE0,x:-3,y:-199,depth:7,score:37,angle:0},{image:t.CONST.WASH.BUBBLE2,x:-106,y:-190,depth:7,score:38,angle:0},{image:t.CONST.WASH.BUBBLE9,x:-69,y:-156,depth:6.8,score:39,angle:0},{image:t.CONST.WASH.BUBBLE6,x:-29,y:-130,depth:6.9,score:40,angle:0},{image:t.CONST.WASH.BUBBLE6,x:-35,y:-227,depth:5.1,score:41,angle:0},{image:t.CONST.WASH.BUBBLE8,x:-111,y:-187,depth:5.2,score:42,angle:0},{image:t.CONST.WASH.BUBBLE5,x:-76,y:-177,depth:5.3,score:43,angle:0},{image:t.CONST.WASH.BUBBLE4,x:-36,y:-165,depth:5.4,score:44,angle:0},{image:t.CONST.WASH.BUBBLE3,x:-34,y:-199,depth:5.5,score:45,angle:0},{image:t.CONST.WASH.BUBBLE9,x:-3,y:-197,depth:5.6,score:46,angle:0},{image:t.CONST.WASH.BUBBLE1,x:-3,y:-154,depth:5.7,score:47,angle:0},{image:t.CONST.WASH.BUBBLE7,x:-40,y:-130,depth:5.8,score:48,angle:0},{image:t.CONST.WASH.BUBBLE0,x:-76,y:-120,depth:5.9,score:49,angle:0},{image:t.CONST.WASH.BUBBLE2,x:-76,y:-175,depth:6,score:50,angle:0},{image:t.CONST.WASH.BUBBLE8,x:-56,y:-118,depth:7,score:51,angle:0},{image:t.CONST.WASH.BUBBLE5,x:-93,y:-197,depth:6.1,score:52,angle:0},{image:t.CONST.WASH.BUBBLE7,x:-67,y:-199,depth:6.2,score:53,angle:0}],winPosition:{x:510,y:375,angle:0,timeToMove:1e3},losePosition:{x:570,y:780,angle:0,timeToMove:1500}},e.soapConfig={startX:113,startY:90,dragScale:.5,startDragTweenTime:300,endDragTweenTime:300},e.gameConfig={washScorePerSecond:11,targetWashScore:39,washingDuration:15e3,fakeWashingDuration:2e4},e.hasGradient=!1,e.rubAudio=null,e}return e(n,a),n.prototype._init=function(){this.leftHand=null,this.rightHand=null,this.isHoldingSoap=!1,this.startedWashing=!1,this.remainingTime=this.gameConfig.washingDuration,this.hasGradient=!1,this.rubAudio=null},n.prototype._preload=function(){},n.prototype._create=function(){this.input.topOnly=!1,this.add.image(0,0,t.CONST.WASH.BACKGROUND).setDepth(0).setOrigin(0,0),this.add.image(432,125,t.CONST.WASH.FAUCET).setDepth(10),this.soap=this.createSoap(),this.leftHand=this.createHand(this.leftHandConfig,this.gameConfig),this.rightHand=this.createHand(this.rightHandConfig,this.gameConfig),this.leftHand.setOtherHand(this.rightHand),this.rightHand.setOtherHand(this.leftHand),this.countdownText=this.createCountdownText(),this.rubAudio=this.sound.add(t.CONST.AUDIO.RUB,{loop:!0,volume:10}),this.rubAudio.play(),this.rubAudio.pause(),this.createStartGradient(),this.createParticles(),this.input.on("gameobjectover",function(e,t){t.handlePointerOver(e)}),this.input.on("gameobjectout",function(e,t){t.handlePointerOut(e)})},n.prototype.createParticles=function(){var e=this.add.particles(t.CONST.WASH.BUBBLE3).setDepth(9);this.popParticles=e.createEmitter({active:!0,visible:!0,on:!1,frequency:-1,gravityY:0,timeScale:1,blendMode:0,lifespan:1500,scale:{start:3,end:0,ease:"Sine.easeOut"},speed:{min:-200,max:200,ease:"Sine.easeInOut"}}),this.popParticles.tint.onChange(16753383)},n.prototype.createSoap=function(){var e=this,a=this.add.image(113,90,t.CONST.WASH.SOAP).setDepth(9.9).setInteractive({useHandCursor:!0});return a.shadow=this.add.image(116,95,t.CONST.WASH.SOAP_SHADOW).setDepth(5),this.input.setDraggable(a),a.startDrag=function(n){e.isHoldingSoap||e.isCurrentState(t.CONST.GAMESTATE.PLAYING)&&(e.hasGradient&&e.gradient.fadeOut(),e.startedWashing=!0,e.isHoldingSoap=!0,a.isHoldingSoap=!0,e.sound.play(t.CONST.AUDIO.GRAB,{detune:e.getDetune()}),a.startTween=e.tweens.add({targets:a,scaleX:e.soapConfig.dragScale,scaleY:e.soapConfig.dragScale,ease:"Quad.easeInOut",repeat:0,duration:e.soapConfig.startDragTweenTime}),e.tweens.add({targets:a.shadow,alpha:0,ease:"Quad.easeInOut",repeat:0,duration:50}),a.dragDiffX=n.x-a.x,a.dragDiffY=n.y-a.y)},a.endDrag=function(){e.isHoldingSoap=!1,a.isHoldingSoap=!1,e.sound.play(t.CONST.AUDIO.BOUNCE,{detune:e.getDetune()}),a.endTween=e.tweens.add({targets:a,x:e.soapConfig.startX,y:e.soapConfig.startY,scaleX:1,scaleY:1,ease:"Quad.easeIn",repeat:0,duration:e.soapConfig.endDragTweenTime}),e.tweens.add({targets:a.shadow,alpha:1,ease:"Quad.easeIn",repeat:0,duration:e.soapConfig.endDragTweenTime/2,delay:e.soapConfig.endDragTweenTime})},a.handlePointerOver=function(e){},a.handlePointerOut=function(e){},this.input.on("dragstart",function(e,a){this.isCurrentState(t.CONST.GAMESTATE.PLAYING)&&a.startDrag(e)},this),this.input.on("pointermove",function(e){this.isHoldingSoap&&(this.soap.x=e.x-this.soap.dragDiffX,this.soap.y=e.y-this.soap.dragDiffY,this.soap.dragDiffX*=.98,this.soap.dragDiffY*=.98)},this),this.input.on("dragend",function(e,a,n){this.isCurrentState(t.CONST.GAMESTATE.PLAYING)},this),a},n.prototype.playWashSound=function(e){e?this.rubAudio.resume():this.rubAudio.pause()},n.prototype.createHand=function(e,t){var a=this,n=this.add.image(e.x,e.y,e.image).setDepth(e.depth).setOrigin(e.originX,e.originY).setAngle(0);return this.createBubbles(n,e),n.cleanScore=0,n.isWashing=!1,n.gameConfig=t,n.config=e,n.polygons=[],e.polygons.forEach(function(e){n.polygons.push(new Phaser.Geom.Polygon(e))}),n.setInteractive(n.polygons,this.customContain),n.setOtherHand=function(e){n.otherHand=e},n.handlePointerOver=function(e){a.isHoldingSoap&&(n.isWashing=!0,a.playWashSound(!0))},n.handlePointerOut=function(){n.isWashing=!1,a.playWashSound(!1)},n.move=function(e){n.currentMove=a.tweens.add({targets:n,x:n.config.x+a.getRandomNumber(n.config.movement.xDiffN,n.config.movement.xDiffP),y:n.config.y+a.getRandomNumber(n.config.movement.yDiffN,n.config.movement.yDiffP),angle:a.getRandomNumber(-n.config.movement.angle,n.config.movement.angle),duration:a.getRandomNumber(n.config.movement.timeRange.min,n.config.movement.timeRange.max),ease:"Sine.easeInOut",delay:e,onComplete:function(){n.move(0)}})},n.update=function(e){if(n.container.setPosition(n.x,n.y),n.container.setAngle(n.angle),n.isWashing){if(n.isClean()&&!n.otherHand.isClean())return void n.otherHand.increaseCleanScore(e);n.increaseCleanScore(e)}},n.increaseCleanScore=function(e){n.cleanScore+=e*a.gameConfig.washScorePerSecond/1e3,n.triggerBubbles()},n.triggerBubbles=function(){n.bubbles.forEach(function(e){!e.triggered&&n.cleanScore>e.targetScore&&(e.triggered=!0,a.tweens.add({targets:e,scaleX:1,scaleY:1,duration:300}))})},n.winAnimation=function(){n.currentMove&&n.currentMove.stop(),n.bubbles.forEach(function(e){a.tweens.add({targets:e,scaleX:0,scaleY:0,delay:n.config.winPosition.timeToMove+a.getRandomNumber(300,1e3),duration:a.getRandomNumber(300,700),ease:"Quad.easeInOut"})}),a.tweens.add({targets:n,x:n.config.winPosition.x,y:n.config.winPosition.y,angle:n.config.winPosition.angle,duration:n.config.winPosition.timeToMove,ease:"Quad.easeInOut"})},n.loseAnimation=function(){n.currentMove&&n.currentMove.stop(),a.tweens.add({targets:n,x:n.config.losePosition.x,y:n.config.losePosition.y,angle:0,duration:n.config.losePosition.timeToMove,ease:"Quad.easeInOut"})},n.isClean=function(){return n.cleanScore>=a.gameConfig.targetWashScore},n.move(e.movement.startDelay),n},n.prototype.createBubbles=function(e,t){var a=this;e.container=this.add.container(e.x,e.y).setDepth(t.depth+1),e.bubbles=[],t.bubbles.forEach(function(t){var n=a.add.image(t.x,t.y,t.image).setDepth(t.depth).setAngle(t.angle).setScale(0);n.targetScore=t.score,n.triggered=!1,e.container.add(n),e.bubbles.push(n)})},n.prototype.customContain=function(e,t,a){return e.some(function(e){return Phaser.Geom.Polygon.Contains(e,t,a)})},n.prototype.createCountdownText=function(){this.countdownTextMultiplier=this.gameConfig.fakeWashingDuration/this.gameConfig.washingDuration;var e=this.add.bitmapText(740,103,t.CONST.FONT.ATLAS,".",55).setOrigin(.5,.5).setDepth(1).setCenterAlign();return e.seconds=this.add.bitmapText(706,103,t.CONST.FONT.ATLAS,"20",55).setOrigin(.5,.5).setDepth(1).setRightAlign(),e.hundredths=this.add.bitmapText(774,103,t.CONST.FONT.ATLAS,"00",55).setOrigin(.5,.5).setDepth(1).setLeftAlign(),e},n.prototype._update=function(e,t){this.leftHand.update(t),this.rightHand.update(t),this.startedWashing&&this.updateCountdown(t)},n.prototype.updateCountdown=function(e){this.isCurrentState(t.CONST.GAMESTATE.PLAYING)&&(this.remainingTime-=e,this.updateCountdownDisplay(),this.remainingTime<=0&&(this.remainingTime=0,this.updateCountdownDisplay(),this.endGame()))},n.prototype.updateCountdownDisplay=function(){var e=Math.floor(this.remainingTime*this.countdownTextMultiplier/10)/100;this.countdownText.seconds.text=this.pad(Math.round(e),2),this.countdownText.hundredths.text=this.pad(Math.round(e%1*100),2)},n.prototype.pad=function(e,t){var a="00"+e;return a.substr(a.length-t)},n.prototype.createStartGradient=function(){var e=this,a=this.registry.get(t.CONST.REGISTRY.WASH_ATTEMPTED);if(this.hasGradient=!a,!a){this.registry.set(t.CONST.REGISTRY.WASH_ATTEMPTED,!0);var n=this.add.image(0,0,t.CONST.WASH.MASK).setOrigin(0).setDepth(200).setAlpha(1);n.canFade=!0,n.fadeOut=function(){n.canFade&&(n.canFade=!1,e.tweens.add({targets:n,alpha:0,ease:"Linear",duration:500,repeat:0,yoyo:!1}))},this.gradient=n}},n.prototype.endGame=function(){this.isHoldingSoap&&this.soap.endDrag(),this.leftHand.isClean()&&this.rightHand.isClean()?this.triggerWin():this.triggerLose()},n.prototype._timeout=function(){},n.prototype._afterLoss=function(){},n.prototype._afterWin=function(){},n.prototype.triggerLose=function(){this.leftHand.loseAnimation(),this.rightHand.loseAnimation(),this.sound.play(t.CONST.AUDIO.LOSE),this.loseGame(1500)},n.prototype.triggerWin=function(){this.leftHand.winAnimation(),this.rightHand.winAnimation();var e=this.add.image(467,203,t.CONST.WASH.WATER).setDepth(9.8).setAlpha(0);this.tweens.add({targets:e,alpha:1,ease:"Sine.easeInOut",duration:300,delay:1e3,repeat:0,yoyo:!1}),this.sound.play(t.CONST.AUDIO.WIN),this.winGame(3500)},n}(a.MinigameScene);exports.WashScene=n;
},{"../../CONST":"HmIA","../generic/MinigameScene":"Qwd5"}],"WrZu":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function a(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../CONST"),i=require("../generic/MinigameScene"),a=function(i){function a(){var e=i.call(this,{sceneName:t.CONST.SCENES.DISTANCING,duration:2e4,showCountdown:!1,startScreenColor:11858431,startText:"KEEP\nYOUR\nDISTANCE!",startTextColor:3289650,startTextYOrigin:.45,loseScreen:t.CONST.DISTANCING.LOSE,winScreen:t.CONST.MENU.DIST_WIN,nextScene:t.CONST.SCENES.WASH,loseButtons:{normalNoSkip:{x:426.5,y:349,scale:1},normalWithSkip:{x:340,y:349,scale:1},skip:{x:543,y:349,scale:1}},winButtons:{continue:{x:265,y:347,scale:.8}}})||this;return e.moveSensitivity=.1,e.staticObjects={box:{image:t.CONST.DISTANCING.BOX,shadow_image:t.CONST.DISTANCING.BOX_SHADOW,physics:"box",shadowOffset:{x:-34,y:-5}},bush_left:{image:t.CONST.DISTANCING.BUSH_LEFT,shadow_image:t.CONST.DISTANCING.BUSH_LEFT_SHADOW,physics:"bush_left",shadowOffset:{x:-34,y:-3}},bush_right:{image:t.CONST.DISTANCING.BUSH_RIGHT,shadow_image:t.CONST.DISTANCING.BUSH_RIGHT_SHADOW,physics:"bush_right",shadowOffset:{x:-34,y:-5}},bush:{image:t.CONST.DISTANCING.BUSH_SMALL,shadow_image:t.CONST.DISTANCING.BUSH_SMALL_SHADOW,physics:"bush_small",shadowOffset:{x:-20,y:1}},house:{image:t.CONST.DISTANCING.HOUSE,shadow_image:t.CONST.DISTANCING.HOUSE_SHADOW,physics:"house",shadowOffset:{x:-32,y:8}},slide:{image:t.CONST.DISTANCING.SLIDE,shadow_image:t.CONST.DISTANCING.SLIDE_SHADOW,physics:"slide",shadowOffset:{x:-89,y:6}},swing:{image:t.CONST.DISTANCING.SWING,shadow_image:t.CONST.DISTANCING.SWING_SHADOW,physics:"swing",shadowOffset:{x:-45,y:-12}},tree:{image:t.CONST.DISTANCING.TREE,shadow_image:t.CONST.DISTANCING.TREE_SHADOW,physics:"tree",shadowOffset:{x:-105,y:0}}},e.characterDisplayConfig={bodyOffset:{x:0,y:0,xOrigin:.5,yOrigin:.5,depthDelta:0},headOffset:{x:1.5,y:-16.5,xOrigin:.502,yOrigin:.9543,depthDelta:.1},leftHandOffset:{x:12.6,y:-12.6,xOrigin:.495,yOrigin:.618,depthDelta:.1},rightHandOffset:{x:-12.1,y:-13,xOrigin:.528,yOrigin:.608,depthDelta:.1},leftLegOffset:{x:-10.79,y:12.66,xOrigin:.353,yOrigin:1-.89,depthDelta:-.1},rightLegOffset:{x:12.27,y:11.76,xOrigin:.596,yOrigin:1-.936,depthDelta:-.1}},e.characterAnimationConfig={body:{idle:[],run:[]},head:{idle:[{x:1.5,y:-15.2,angle:0,duration:500,ease:"Sine.easeInOut"},{x:1.5,y:-16.5,angle:0,duration:500,ease:"Sine.easeInOut"}],run:[{x:1.5,y:-16.5,angle:-3.565,duration:334,ease:"Sine.easeInOut"},{x:1.5,y:-16.5,angle:3,duration:334,ease:"Sine.easeInOut"}]},left_hand:{idle:[{x:12.6,y:-12.6,angle:-13.5,duration:500,ease:"Sine.easeInOut"},{x:12.6,y:-12.6,angle:0,duration:500,ease:"Sine.easeInOut"}],run:[{x:12.6,y:-12.6,angle:10,duration:167,ease:"Sine.easeOut"},{x:12.6,y:-12.6,angle:-10,duration:334,ease:"Sine.easeInOut"},{x:12.6,y:-12.6,angle:0,duration:167,ease:"Sine.easeIn"}]},right_hand:{idle:[{x:-12.1,y:-13,angle:13,duration:500,ease:"Sine.easeInOut"},{x:-12.1,y:-13,angle:0,duration:500,ease:"Sine.easeInOut"}],run:[{x:-12.1,y:-13,angle:10,duration:167,ease:"Sine.easeOut"},{x:-12.1,y:-13,angle:-10,duration:334,ease:"Sine.easeInOut"},{x:-12.1,y:-13,angle:0,duration:167,ease:"Sine.easeIn"}]},left_leg:{idle:[{x:-10.79,y:12.66,angle:0,duration:167,ease:"Sine.easeInOut"}],run:[{x:-10.79,y:12.66,angle:0,duration:167,ease:"Sine.easeInOut"},{x:-8.6,y:12.66,angle:-34.325,duration:167,ease:"Sine.easeOut"},{x:-10.79,y:12.66,angle:0,duration:167,ease:"Sine.easeIn"},{x:-13.1,y:12.66,angle:12.644,duration:167,ease:"Sine.easeInOut"}]},right_leg:{idle:[{x:12.27,y:11.76,angle:0,duration:167,ease:"Sine.easeInOut"}],run:[{x:12.27,y:11.76,angle:0,duration:167,ease:"Sine.easeInOut"},{x:10.2,y:11.76,angle:11.922,duration:167,ease:"Sine.easeOut"},{x:12.27,y:11.76,angle:0,duration:167,ease:"Sine.easeIn"},{x:14.1,y:11.76,angle:-46.645,duration:167,ease:"Sine.easeInOut"}]}},e.gameConfig={dotsAlphaDistance:{min:5e4,max:25e3},camera:{targetX:3420,moveSpeed:100,timeToMaxSpeed:2e3},maxVelocity:{x:50,y:50},winPosition:{x:3846,y:337}},e.charactersConfig={player:{body:t.CONST.DISTANCING.BODY,head:t.CONST.DISTANCING.FACE,leftHand:t.CONST.DISTANCING.LEFT_HAND,rightHand:t.CONST.DISTANCING.RIGHT_HAND,leftLeg:t.CONST.DISTANCING.LEFT_LEG,rightLeg:t.CONST.DISTANCING.RIGHT_LEG,startIdle:!0},alan:{body:t.CONST.DISTANCING.ALAN_BODY,head:t.CONST.DISTANCING.ALAN_FACE,leftHand:t.CONST.DISTANCING.ALAN_LEFT_HAND,rightHand:t.CONST.DISTANCING.ALAN_RIGHT_HAND,leftLeg:t.CONST.DISTANCING.ALAN_LEFT_LEG,rightLeg:t.CONST.DISTANCING.ALAN_RIGHT_LEG,startIdle:!0},kid1:{body:t.CONST.DISTANCING.KID1_BODY,head:t.CONST.DISTANCING.KID1_FACE,leftHand:t.CONST.DISTANCING.LEFT_HAND,rightHand:t.CONST.DISTANCING.RIGHT_HAND,leftLeg:t.CONST.DISTANCING.LEFT_LEG,rightLeg:t.CONST.DISTANCING.RIGHT_LEG,startIdle:!0,headOffsetOverride:{x:1.5,y:-16.5,xOrigin:.502,yOrigin:.756,depthDelta:.1}},kid2:{body:t.CONST.DISTANCING.KID2_BODY,head:t.CONST.DISTANCING.KID2_FACE,leftHand:t.CONST.DISTANCING.LEFT_HAND,rightHand:t.CONST.DISTANCING.RIGHT_HAND,leftLeg:t.CONST.DISTANCING.LEFT_LEG,rightLeg:t.CONST.DISTANCING.RIGHT_LEG,startIdle:!0},kid3:{body:t.CONST.DISTANCING.KID3_BODY,head:t.CONST.DISTANCING.KID3_FACE,leftHand:t.CONST.DISTANCING.LEFT_HAND,rightHand:t.CONST.DISTANCING.RIGHT_HAND,leftLeg:t.CONST.DISTANCING.LEFT_LEG,rightLeg:t.CONST.DISTANCING.RIGHT_LEG,startIdle:!0},kid4:{body:t.CONST.DISTANCING.KID4_BODY,head:t.CONST.DISTANCING.KID4_FACE,leftHand:t.CONST.DISTANCING.LEFT_HAND,rightHand:t.CONST.DISTANCING.RIGHT_HAND,leftLeg:t.CONST.DISTANCING.LEFT_LEG,rightLeg:t.CONST.DISTANCING.RIGHT_LEG,startIdle:!0,headOffsetOverride:{x:1.5,y:-16.5,xOrigin:.502,yOrigin:.756,depthDelta:.1}}},e.characterLocations=[{x:286,y:245,character:e.charactersConfig.kid1,screen:1,isMoving:!1},{x:465,y:52,character:e.charactersConfig.kid3,screen:1,isMoving:!0,targetX:613,targetY:52,speed:100},{x:777,y:312,character:e.charactersConfig.kid2,screen:1,isMoving:!1},{x:252,y:281,character:e.charactersConfig.kid4,screen:2,isMoving:!1},{x:437,y:206,character:e.charactersConfig.kid2,screen:2,isMoving:!0,targetX:628,targetY:119,speed:100},{x:608,y:394,character:e.charactersConfig.kid1,screen:2,isMoving:!1},{x:806,y:132,character:e.charactersConfig.kid3,screen:2,isMoving:!1},{x:93,y:206,character:e.charactersConfig.kid4,screen:3,isMoving:!1},{x:309,y:266,character:e.charactersConfig.kid1,screen:3,isMoving:!0,targetX:121,targetY:445,speed:100},{x:439,y:126,character:e.charactersConfig.kid4,screen:3,isMoving:!1},{x:580,y:372,character:e.charactersConfig.kid3,screen:3,isMoving:!1},{x:693,y:140,character:e.charactersConfig.alan,screen:3,isMoving:!1},{x:278,y:213,character:e.charactersConfig.kid2,screen:4}],e.objectLocations=[{x:387,y:49,object:"tree",screen:0},{x:451,y:100,object:"tree",screen:0},{x:664,y:36,object:"tree",screen:0},{x:599,y:85,object:"tree",screen:0},{x:782,y:28,object:"tree",screen:0},{x:805,y:120,object:"tree",screen:0},{x:703,y:143,object:"tree",screen:0},{x:374,y:149,object:"tree",screen:0},{x:248,y:185,object:"tree",screen:0},{x:190,y:105,object:"tree",screen:0},{x:238,y:47,object:"tree",screen:0},{x:97,y:140,object:"tree",screen:0},{x:173,y:258,object:"tree",screen:0},{x:52,y:204,object:"tree",screen:0},{x:241,y:310,object:"tree",screen:0},{x:69,y:331,object:"tree",screen:0},{x:180,y:380,object:"tree",screen:0},{x:106,y:439,object:"tree",screen:0},{x:250,y:490,object:"tree",screen:0},{x:164,y:522,object:"tree",screen:0},{x:346,y:542,object:"tree",screen:0},{x:738,y:394,object:"tree",screen:0},{x:546,y:246,object:"tree",screen:0},{x:5,y:402,object:"tree",screen:0},{x:-15,y:260,object:"tree",screen:0},{x:38,y:52,object:"tree",screen:0},{x:685,y:425,object:"bush_right",screen:1},{x:574,y:422,object:"bush_left",screen:1},{x:516,y:288,object:"bush_left",screen:1},{x:402,y:286,object:"bush_right",screen:1},{x:391,y:230,object:"bush_left",screen:1},{x:503,y:231,object:"bush_right",screen:1},{x:376,y:128,object:"bush_left",screen:1},{x:262,y:126,object:"bush_right",screen:1},{x:540,y:110,object:"bush",screen:1},{x:471,y:453,object:"bush",screen:1},{x:158,y:262,object:"bush",screen:1},{x:162,y:407,object:"bush",screen:1},{x:756,y:113,object:"bush",screen:1},{x:781,y:228,object:"bush",screen:1},{x:135,y:92,object:"tree",screen:1},{x:363,y:28,object:"tree",screen:1},{x:25,y:42,object:"tree",screen:1},{x:698,y:226,object:"box",screen:2},{x:470,y:391,object:"swing",screen:2},{x:161,y:302,object:"slide",screen:2},{x:18,y:379,object:"bush",screen:2},{x:142,y:447,object:"bush",screen:2},{x:801,y:57,object:"tree",screen:2},{x:702,y:83,object:"tree",screen:2},{x:436,y:41,object:"tree",screen:2},{x:164,y:78,object:"tree",screen:2},{x:355,y:105,object:"tree",screen:2},{x:492,y:92,object:"tree",screen:2},{x:590,y:16,object:"tree",screen:2},{x:115,y:28,object:"tree",screen:2},{x:67,y:100,object:"tree",screen:2},{x:791,y:315,object:"tree",screen:3},{x:819,y:165,object:"tree",screen:3},{x:668,y:368,object:"tree",screen:3},{x:605,y:470,object:"tree",screen:3},{x:747,y:438,object:"tree",screen:3},{x:737,y:225,object:"tree",screen:3},{x:550,y:185,object:"tree",screen:3},{x:514,y:297,object:"tree",screen:3},{x:692,y:515,object:"tree",screen:3},{x:812,y:550,object:"tree",screen:3},{x:801,y:57,object:"tree",screen:3},{x:712,y:83,object:"tree",screen:3},{x:436,y:41,object:"tree",screen:3},{x:252,y:136,object:"tree",screen:3},{x:164,y:78,object:"tree",screen:3},{x:355,y:105,object:"tree",screen:3},{x:492,y:92,object:"tree",screen:3},{x:590,y:16,object:"tree",screen:3},{x:96,y:28,object:"tree",screen:3},{x:67,y:100,object:"tree",screen:3},{x:859,y:168,object:"tree",screen:4},{x:801,y:57,object:"tree",screen:4},{x:702,y:83,object:"tree",screen:4},{x:416,y:35,object:"tree",screen:4},{x:164,y:78,object:"tree",screen:4},{x:355,y:105,object:"tree",screen:4},{x:492,y:92,object:"tree",screen:4},{x:590,y:16,object:"tree",screen:4},{x:96,y:28,object:"tree",screen:4},{x:67,y:100,object:"tree",screen:4},{x:400,y:165,object:"tree",screen:4},{x:357,y:262,object:"tree",screen:4},{x:266,y:348,object:"tree",screen:4},{x:208,y:195,object:"tree",screen:4},{x:116,y:281,object:"tree",screen:4},{x:64,y:380,object:"tree",screen:4},{x:89,y:522,object:"tree",screen:4},{x:189,y:492,object:"tree",screen:4},{x:420,y:533,object:"tree",screen:4},{x:677,y:344,object:"house",screen:4}],e.screenOffset=0,e.pointerOffset=null,e.NPCs=[],e.followRect=null,e.hasClickedPlayer=!1,e.cameraSpeed=0,e.cameraTimer=0,e}return e(a,i),a.prototype._init=function(){this.player=null,this.pointerOffset=null,this.NPCs=[],this.followRect=null,this.endImage=null,this.cameraSpeed=0,this.cameraTimer=0,this.hasClickedPlayer=!1},a.prototype._preload=function(){},a.prototype._create=function(){this.add.image(0,0,t.CONST.DISTANCING.BACKGROUND).setDepth(0).setOrigin(0,0),this.add.image(853,0,t.CONST.DISTANCING.BACKGROUND).setDepth(0).setOrigin(0,0),this.add.image(1706,0,t.CONST.DISTANCING.BACKGROUND).setDepth(0).setOrigin(0,0),this.add.image(2559,0,t.CONST.DISTANCING.BACKGROUND).setDepth(0).setOrigin(0,0),this.add.image(2559,0,t.CONST.DISTANCING.BACKGROUND).setDepth(0).setOrigin(0,0),this.add.image(3412,0,t.CONST.DISTANCING.BACKGROUND).setDepth(0).setOrigin(0,0),this.initPhysics(),this.createStaticObjects(),this.spawnNPCs(),this.spawnPlayer(392,312),this.add.bitmapText(397,352,t.CONST.FONT.ATLAS,"DRAG!",50).setOrigin(.5,.5).setTint(10658851).setDepth(1).setRightAlign()},a.prototype.createStaticObjects=function(){var e=this;this.objectLocations.forEach(function(t){e.spawnStaticObject(t.object,t.x+e.game.renderer.width*(t.screen-e.screenOffset),t.y)})},a.prototype.spawnStaticObject=function(e,t,i){var a=this.staticObjects[e];this.matter.add.image(t,i,a.image,void 0,{shape:this.physicsShapes[a.physics]}).setDepth(i),this.add.image(t+a.shadowOffset.x,i+a.shadowOffset.y,a.shadow_image).setDepth(.1)},a.prototype.initPhysics=function(){this.physicsShapes=this.cache.json.get(t.CONST.PHYSICS.DISTANCE),this.matter.world.setBounds(0,0,5*this.game.renderer.width,this.game.renderer.height),this.collisionPlayer=2,this.matter.world.on("collisionstart",function(e,t,i){"npc"!==t.parent.label&&"npc"!==i.parent.label||this.player.die(),"followRect"!==t.parent.label&&"followRect"!==i.parent.label||this.player.image.animate(!1),"winZone"!==t.parent.label&&"winZone"!==i.parent.label||this.player.win()},this),this.initFollowRect()},a.prototype.spawnNPCs=function(){var e=this;this.characterLocations.forEach(function(t){e.createNPC(t.x+e.game.renderer.width*(t.screen-e.screenOffset),t.y,t.character,t.isMoving,t.isMoving?t.targetX+e.game.renderer.width*(t.screen-e.screenOffset):0,t.isMoving?t.targetY:0,t.isMoving?t.speed:0)})},a.prototype.createNPC=function(e,i,a,n,r,s,o){var c=this;void 0===r&&(r=0),void 0===s&&(s=0),void 0===o&&(o=0);var h=this.createPlayerAnim(e,i,a),y=this.matter.add.image(e,i+20,t.CONST.DISTANCING.DOTS,void 0,{shape:this.physicsShapes.dots,label:"npc"}).setDepth(3).setAlpha(1);if(h.collider=y,h.updateDots=function(){var e=Math.pow(c.player.body.x-h.collider.x,2)+Math.pow(1.73*(c.player.body.y-h.collider.y),2);h.collider.setAlpha((e-c.gameConfig.dotsAlphaDistance.min)/(c.gameConfig.dotsAlphaDistance.max-c.gameConfig.dotsAlphaDistance.min)*.5)},h.update=function(e){h.updateDots(),h.moveTo(h.collider.x,h.collider.y-20),h.setDepth(h.collider.y)},h.move=function(e,t,i){c.tweens.add({targets:h.collider,x:e,y:t+20,duration:i,repeat:-1,yoyo:!0,ease:"Sine.easeInOut"}),h.animate(!1,!0)},n){var d=1e3*Phaser.Math.Distance.Between(e,i,r,s)/o;h.move(r,s,d)}this.NPCs.push(h)},a.prototype.spawnPlayer=function(e,i){var a=this,n={image:this.createPlayerAnim(e,i,this.charactersConfig.player),body:this.matter.add.image(e,i,t.CONST.DISTANCING.PLAYER,null,{label:"player",ignoreGravity:!0,frictionAir:.25,friction:0,shape:this.physicsShapes.player}).setCollisionCategory(this.collisionPlayer).setAlpha(0).setVisible(!1),isDragging:!1,isAlive:!0,hasWon:!1,oldX:0,onUpdate:function(){if(n.image.moveTo(n.body.x,n.body.y-20),n.image.setDepth(n.body.y),n.body.setAngle(0),n.oldX=n.body.x,n.isAlive&&n.isDragging&&!n.hasWon){var e=Phaser.Math.Clamp(a.cameras.main.scrollX+a.input.activePointer.x+a.pointerOffset.x-n.image.xPos,-a.gameConfig.maxVelocity.x,a.gameConfig.maxVelocity.x),t=Phaser.Math.Clamp(a.input.activePointer.y+a.pointerOffset.y-n.image.yPos,-a.gameConfig.maxVelocity.y,a.gameConfig.maxVelocity.y);n.body.setVelocity(e*a.moveSensitivity,t*a.moveSensitivity),n.checkForWin()}},checkForWin:function(){n.isAlive&&!n.hasWon&&n.body.x>a.gameConfig.winPosition.x&&n.body.y<a.gameConfig.winPosition.y&&(n.hasWon=!0,a.matter.world.remove(n.body),a.triggerWin())},die:function(){a.triggerLose(),n.isAlive=!1,n.image.animate(!0,!1),a.matter.world.remove(n.body)},win:function(){n.isAlive=!1,a.tweens.add({targets:n.image,alpha:0,y:"-=100",ease:"Quad.easeIn",duration:1e3,repeat:0,yoyo:!1}),a.triggerWin()}};this.input.on("pointerdown",function(e){this.hasClickedPlayer=!0,this.hasGradient&&this.gradient.fadeOut(),this.player.isAlive&&!this.player.hasWon&&(this.player.image.animate(!1),this.pointerOffset={x:n.image.xPos-e.x-this.cameras.main.scrollX,y:n.image.yPos-e.y},this.player.isDragging=!0)},this),this.input.on("pointerup",function(e){this.player.isDragging=!1,this.player.isAlive&&!this.player.hasWon&&this.player.image.animate(!0)},this),this.player=n},a.prototype.createPlayerAnim=function(e,t,i){var a=this.characterDisplayConfig,n=this.characterAnimationConfig,r={xPos:e,yPos:t,body:this.addPlayerImage(e,t,i.body,a.bodyOffset,n.body),head:this.addPlayerImage(e,t,i.head,i.headOffsetOverride?i.headOffsetOverride:a.headOffset,n.head),left_hand:this.addPlayerImage(e,t,i.leftHand,a.leftHandOffset,n.left_hand),right_hand:this.addPlayerImage(e,t,i.rightHand,a.rightHandOffset,n.right_hand),left_leg:this.addPlayerImage(e,t,i.leftLeg,a.leftLegOffset,n.left_leg),right_leg:this.addPlayerImage(e,t,i.rightLeg,a.rightLegOffset,n.right_leg),moveTo:function(e,t){r.xPos=e,r.yPos=t,r.body.moveTo(e,t),r.head.moveTo(e,t),r.left_hand.moveTo(e,t),r.right_hand.moveTo(e,t),r.left_leg.moveTo(e,t),r.right_leg.moveTo(e,t)},setDepth:function(e){r.body.updateDepth(e),r.head.updateDepth(e),r.left_hand.updateDepth(e),r.right_hand.updateDepth(e),r.left_leg.updateDepth(e),r.right_leg.updateDepth(e)},animate:function(e,t){r.head.animate(e,t),r.body.animate(e,t),r.left_hand.animate(e,t),r.right_hand.animate(e,t),r.left_leg.animate(e,t),r.right_leg.animate(e,t)}};return r.animate(i.startIdle,!0),r},a.prototype.addPlayerImage=function(e,t,i,a,n){var r=this,s={image:this.add.image(e+a.x,t+a.y,i).setDepth(300+a.depthDelta).setOrigin(a.xOrigin,a.yOrigin).setInteractive({useHandCursor:!0}),conf:a,tweenX:a.x,tweenY:a.y,tweenAngle:0,currentTween:this.tweens.createTimeline(),isIdleAnim:!1,moveTo:function(e,t){s.image.setPosition(e+s.tweenX,t+s.tweenY),s.image.setAngle(s.tweenAngle)},updateDepth:function(e){s.image.setDepth(e+s.conf.depthDelta)},animate:function(e,t){if(t||e!=s.isIdleAnim){s.isIdleAnim=e,s.currentTween&&s.currentTween.stop();var i=e?s.idleTweens:s.runTweens;0!=i.length&&(s.currentTween=r.tweens.timeline({loop:-1,tweens:i}))}},buildAnimations:function(e){var t=[];if(e.forEach(function(e){t.push({targets:s,tweenX:e.x,tweenY:e.y,tweenAngle:e.angle,duration:e.duration,ease:e.ease})}),t.length>0){var i=Object.assign({},t[t.length-1]);t.unshift(i),t[0].duration=0}return t}};return s.idleTweens=s.buildAnimations(n.idle),s.runTweens=s.buildAnimations(n.run),s},a.prototype._update=function(e,t){this.player.onUpdate(),this.NPCs.forEach(function(e){e.update(t)}),this.moveCamera(t),this.followRect.onUpdate(),this.checkIfPlayerInBounds()},a.prototype.moveCamera=function(e){this.hasClickedPlayer&&(this.cameras.main.scrollX>this.gameConfig.camera.targetX?this.player.isDragging||this.player.image.animate(!0):(this.player.isAlive?this.cameraTimer+=e/this.gameConfig.camera.timeToMaxSpeed:this.cameraTimer-=3*e/this.gameConfig.camera.timeToMaxSpeed,this.cameraSpeed=Math.min(Phaser.Math.Interpolation.SmoothStep(this.cameraTimer,0,this.gameConfig.camera.moveSpeed),this.gameConfig.camera.targetX-this.cameras.main.scrollX),this.cameras.main.scrollX=this.cameras.main.scrollX+this.cameraSpeed*e/1e3))},a.prototype.initFollowRect=function(){var e=this,i=this.matter.add.image(0,400,t.CONST.DISTANCING.BUSH_SMALL,void 0,{isStatic:!0,label:"followRect"}).setScale(.5,30).setAlpha(0);i.onUpdate=function(){i.x=e.cameras.main.scrollX+20},this.followRect=i},a.prototype.checkIfPlayerInBounds=function(){this.isCurrentState(t.CONST.GAMESTATE.PLAYING)&&(this.cameras.main.worldView.contains(this.player.body.x,this.player.body.y)||this.player.die())},a.prototype._timeout=function(){},a.prototype._afterLoss=function(){},a.prototype._afterWin=function(){},a.prototype.loseAnim=function(){this.endImage=this.add.image(this.player.body.x,this.player.body.y-45,t.CONST.SWEAT.BRACES).setDepth(this.player.body.y+10).setScale(0),this.endImage.setRotation(Math.PI);this.tweens.timeline({targets:this.endImage,ease:"Cubic.easeInOut",duration:1e3,loop:0,tweens:[{targets:this.endImage,scaleX:.07*1.3,scaleY:.07*1.3,rotation:"-=0.2",duration:700,repeat:0,yoyo:!1},{targets:this.endImage,scaleX:.07,scaleY:.07,rotation:"+=0.2",duration:300,repeat:0,yoyo:!1}]})},a.prototype.winAnim=function(){var e=this;this.player.image.animate(!0,!1),this.tweens.add({targets:this.player.body,x:this.player.body.x,ease:"Sine.easeInOut",duration:1e3,repeat:0,yoyo:!1,onComplete:function(){e.player.image.animate(!1,!1),e.tweens.add({targets:e.player.body,x:4040,y:286,ease:"Sine.easeInOut",duration:2e3,repeat:0,yoyo:!1})}})},a.prototype.triggerLose=function(){this.sound.play(t.CONST.AUDIO.LOSE),this.loseAnim(),this.loseGame(3e3)},a.prototype.triggerWin=function(){this.sound.play(t.CONST.AUDIO.WIN),this.winAnim(),this.winGame(3500)},a}(i.MinigameScene);exports.DistancingScene=a;
},{"../../CONST":"HmIA","../generic/MinigameScene":"Qwd5"}],"FSea":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../CONST"),n=require("./generic/MinigameScene"),o=function(n){function o(){var t=n.call(this,{sceneName:e.CONST.SCENES.CREDITS,duration:5e3,showCountdown:!1,startScreenColor:12713947,startText:"",startTextColor:3289650,nextScene:e.CONST.SCENES.MENU,timeToStart:0,loseButtons:{normalNoSkip:{x:426.5,y:386,scale:1.3},normalWithSkip:{x:283,y:386,scale:1.3},skip:{x:570,y:386,scale:1.3}},winButtons:{continue:{x:-500,y:-500,scale:.8}}})||this;return t.clicked=!1,t}return t(o,n),o.prototype._init=function(){this.clicked=!1},o.prototype._preload=function(){},o.prototype._create=function(){var t=this;this.add.image(0,0,e.CONST.CREDITS.END).setOrigin(0,0);var n=this.add.image(400,315,e.CONST.BUTTONS.PLAYAGAIN).setOrigin(0,0).setDepth(2).setInteractive({useHandCursor:!0});n.setInteractive({useHandCursor:!0}),n.on("pointerdown",function(){t.clicked=!0}),n.on("pointerup",function(){t.clicked&&t.winGame(0)})},o.prototype._update=function(t,e){},o.prototype._timeout=function(){},o.prototype._afterLoss=function(){},o.prototype._afterWin=function(){this.loadNextScene()},o}(n.MinigameScene);exports.CreditsScene=o;
},{"../CONST":"HmIA","./generic/MinigameScene":"Qwd5"}],"jP6t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./scenes/LoadScene"),c=require("./scenes/MenuScene"),s=require("./scenes/SoundtrackScene"),n=require("./scenes/ProgressiveLoadScene"),r=require("./scenes/covid/SweatScene"),i=require("./scenes/covid/WashScene"),a=require("./scenes/covid/DistancingScene"),S=require("./scenes/CreditsScene"),t=new Phaser.Game({width:853,height:480,scale:{mode:Phaser.Scale.FIT},scene:[e.LoadScene,n.ProgressiveLoadScene,s.SoundtrackScene,c.MenuScene,r.SweatScene,i.WashScene,a.DistancingScene,S.CreditsScene],physics:{default:"matter",matter:{debug:!1}}});
},{"./scenes/LoadScene":"G1z3","./scenes/MenuScene":"OuK+","./scenes/SoundtrackScene":"QxR8","./scenes/ProgressiveLoadScene":"Y/W/","./scenes/covid/SweatScene":"QN9X","./scenes/covid/WashScene":"F5in","./scenes/covid/DistancingScene":"WrZu","./scenes/CreditsScene":"FSea"}]},{},["jP6t"], null)